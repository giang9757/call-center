/*
 The buffer module from node.js, for the browser.

 @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 @license  MIT
*/
(function e$jscomp$0(n,k,a){function c(b,l){if(!k[b]){if(!n[b]){var e="function"==typeof require&&require;if(!l&&e)return e(b,!0);if(d)return d(b,!0);e=Error("Cannot find module '"+b+"'");throw e.code="MODULE_NOT_FOUND",e;}e=k[b]={exports:{}};n[b][0].call(e.exports,function(a){var f=n[b][1][a];return c(f?f:a)},e,e.exports,e$jscomp$0,n,k,a)}return k[b].exports}for(var d="function"==typeof require&&require,b=0;b<a.length;b++)c(a[b]);return c})({1:[function(g,n,k){Twilio=function(a){var c=a||function(){};
(function(a){for(var b in a)c[b]=a[b]})(function(){var a=g("./twilio/util"),b;if("undefined"==typeof b){b=location.protocol||"http:";for(var c="//media.twiliocdn.com/sdk/js/client/",l=document.getElementsByTagName("script"),q=RegExp("(\\w+:)?(//.*)v"+a.getPStreamVersion()+"/(twilio.min.js|twilio.js)"),f=0;f<l.length;f++){var p=l[f].src.match(q);if(p){b=p[1]||b;c=p[2];break}}b+=c}a.setTwilioRoot(b);return g("./twilio")}());return c}("undefined"!==typeof Twilio?Twilio:null)},{"./twilio":2,"./twilio/util":20}],
2:[function(g,n,k){k.Device=g("./twilio/device").Device;k.PStream=g("./twilio/pstream").PStream;k.Connection=g("./twilio/connection").Connection},{"./twilio/connection":3,"./twilio/device":4,"./twilio/pstream":9}],3:[function(g,n,k){function a(m,w,t){function d(){}function g(){var a={call_sid:h.parameters.CallSid,client_name:m._clientName,sdk_version:f.getReleaseVersion(),selected_region:m.options.region};m.stream&&(m.stream.gateway&&(a.gateway=m.stream.gateway),m.stream.region&&(a.region=m.stream.region));
h._direction&&(a.direction=h._direction);return a}function k(){0!==D.length&&r.postMetrics("quality-metrics-samples","metrics-sample",D.splice(0),g())}function x(h){var a={threshold:h.threshold.value};h.values?a.values=h.values.map(function(h){return"number"===typeof h?Math.round(100*h)/100:h}):h.value&&(a.value=h.value);return{data:a}}function u(a,m){var b=(/^audio/.test(m.name)?"audio-level-":"network-quality-")+"warning"+(a?"-cleared":"-raised"),f=v[m.threshold.name]+p[m.name];if("constant-audio-input-level"!==
f||!h.isMuted()){var c=a?"info":"warning";"constant-audio-output-level"===f&&(c="info");r.post(c,b,f,x(m))}}if(!(this instanceof a))return new a(m,w,t);f.monitorEventEmitter("Twilio.Connection",this);this.device=m;this.message=w||{};t=t||{};w={logPrefix:"[Connection]",mediaStreamFactory:l.PeerConnection,offerSdp:null,callParameters:{},debug:!1,encrypt:!1,audioConstraints:m.options.audioConstraints,rtcConstraints:m.options.rtcConstraints,iceServers:m.options.iceServers};for(var B in w)B in t||(t[B]=
w[B]);this.options=t;this.parameters=t.callParameters;this._status=this.options.offerSdp?"pending":"closed";this._direction=this.parameters.CallSid?"INCOMING":"OUTGOING";this.sendHangup=!0;b.mixinLog(this,this.options.logPrefix);this.log.enabled=this.options.debug;this.log.warnings=this.options.warnings;this._onHangup=this._onCancel=d;this._onAnswer=function(a){"undefined"!==typeof a.callsid&&(h.parameters.CallSid=a.callsid,h.mediaStream.callSid=a.callsid)};var h=this,r=this._publisher=new e("twilio-js-sdk",
m.token,{host:m.options.eventgw,defaultPayload:function(){var a={client_name:m._clientName,platform:l.getMediaEngine(),sdk_version:f.getReleaseVersion(),selected_region:m.options.region};h.parameters.CallSid&&!/^TJ/.test(h.parameters.CallSid)&&(a.call_sid=h.parameters.CallSid);h.outboundConnectionId&&(a.temp_call_sid=h.outboundConnectionId);m.stream&&(m.stream.gateway&&(a.gateway=m.stream.gateway),m.stream.region&&(a.region=m.stream.region));h._direction&&(a.direction=h._direction);return a}});!1===
t.publishEvents&&r.disable();"INCOMING"===this._direction&&r.info("connection","incoming");var z=this._monitor=new q;z.disableWarnings();var D=[],F=0;z.on("sample",function(h){20>F?F++:20===F&&z.enableWarnings();D.push(h);10<=D.length&&k()});z.on("warning-cleared",u.bind(null,!0));z.on("warning",u.bind(null,!1));this.mediaStream=new this.options.mediaStreamFactory(this.options.encrypt,this.device);this.mediaStream.oniceconnectionstatechange=function(h){r.post("failed"===h?"error":"debug","ice-connection-state",
h)};this.mediaStream.onicegatheringstatechange=function(h){r.debug("signaling-state",h)};this.mediaStream.onsignalingstatechange=function(h){r.debug("signaling-state",h)};h=this;this.mediaStream.ondisconnect=function(a){h.log(a);r.warn("network-quality-warning-raised","ice-connectivity-lost",{message:a},h);h.emit("error",{code:31003,message:a,info:{code:31003,message:a},connection:h})};this.mediaStream.onreconnect=function(a){h.log(a);r.info("network-quality-warning-cleared","ice-connectivity-lost",
{message:a},h)};this.mediaStream.onerror=function(a){!0===a.disconnect&&h._disconnect(a.info&&a.info.message);var m={code:a.info.code,message:a.info.message||"Error with mediastream",info:a.info,connection:h};h.log("Received an error from MediaStream:",a);h.emit("error",m)};this.mediaStream.onopen=function(){"open"!==h._status&&("connecting"===h._status?(h._status="open",h.mediaStream.attachAudio(),h.emit("accept",h)):h.mediaStream.close())};this.mediaStream.onclose=function(){h._status="closed";
h.device.sounds.disconnect()&&h.device.soundcache.play("disconnect");z.disable();k();h.emit("disconnect",h)};this.outboundConnectionId=f.generateConnectionUUID();this.pstream=this.device.stream;this._onCancel=function(a){h.parameters.CallSid==a.callsid&&(h._status="closed",h.emit("cancel"),h.pstream.removeListener("cancel",h._onCancel))};this.pstream&&this.pstream.addListener("cancel",this._onCancel);this.on("error",function(a){r.error("connection","error",{code:a.code,message:a.message});h.pstream&&
"disconnected"===h.pstream.status&&c(h)});this.on("disconnect",function(){c(h)});return this}function c(a){function b(){a.pstream.removeListener("answer",a._onAnswer);a.pstream.removeListener("cancel",a._onCancel);a.pstream.removeListener("hangup",a._onHangup)}b();setTimeout(b,0)}n=g("events").EventEmitter;var d=g("./util").Exception,b=g("./log"),e=g("./eventpublisher"),l=g("./rtc"),q=g("./rtc/monitor"),f=g("./util"),p={audioOutputLevel:"audio-output-level",audioInputLevel:"audio-input-level",packetsLostFraction:"packet-loss",
jitter:"jitter",rtt:"rtt",mos:"mos"},v={min:"low-",max:"high-",maxDuration:"constant-"};g("util").inherits(a,n);a.toString=function(){return"[Twilio.Connection class]"};a.prototype.toString=function(){return"[Twilio.Connection instance]"};a.prototype.sendDigits=function(a){function b(a){if(a.length){var f=a.shift();f.length&&e.insertDTMF(f,160,70);setTimeout(b.bind(null,a),500)}}if(a.match(/[^0-9*#w]/))throw new d("Illegal character passed into sendDigits");for(var f=[],m=0;m<a.length;m++){var c=
"w"!=a[m]?"dtmf"+a[m]:"";"dtmf*"==c&&(c="dtmfs");"dtmf#"==c&&(c="dtmfh");f.push([c,200,20])}this.device.soundcache.playseq(f);var e=this.mediaStream.getOrCreateDTMFSender();if(e){if(!("canInsertDTMF"in e)||e.canInsertDTMF)return this.log("Sending digits using RTCDTMFSender"),b(a.split("w"));this.log("RTCDTMFSender cannot insert DTMF")}this.log("Sending digits over PStream");null!=this.pstream&&"disconnected"!=this.pstream.status?(a={dtmf:a,callsid:this.parameters.CallSid},this.pstream.publish("dtmf",
a)):(a={error:{}},this.emit("error",{code:a.error.code||31E3,message:a.error.message||"Could not send DTMF: Signaling channel is disconnected",connection:this}))};a.prototype.status=function(){return this._status};a.prototype.mute=function(a){0===arguments.length&&this.log.deprecated(".mute() is deprecated. Please use .mute(true) or .mute(false) to mute or unmute a call instead.");if("function"==typeof a)return this.addListener("mute",a);var b=this.isMuted(),f=this,c=function(){var a=f.isMuted();
b!=a&&(f._publisher.info("connection",a?"muted":"unmuted"),f.emit("mute",a,f))};0==a?this.mediaStream.attachAudio(c):this.mediaStream.detachAudio(c)};a.prototype.isMuted=function(){return!this.mediaStream.isAudioAttached()};a.prototype.unmute=function(){this.log.deprecated(".unmute() is deprecated. Please use .mute(false) to unmute a call instead.");this.mute(!1)};a.prototype.accept=function(a){if("function"==typeof a)return this.addListener("accept",a);var f=a||this.options.audioConstraints,b=this;
this._status="connecting";this.mediaStream.openHelper(function(a){function m(a){b._publisher.info("connection","accepted-by-local");b._monitor.enable(a)}function e(a){b._publisher.info("connection","accepted-by-remote");b._monitor.enable(a)}if("connecting"!=b._status)c(b),b.mediaStream.close();else{if(a)return 31208===a.code?b._publisher.error("get-user-media","denied",{data:{audioConstraints:f,error:a.error}}):b._publisher.error("get-user-media","failed",{data:{audioConstraints:f,error:a.error}}),
b._die(a.message,a.code);b._publisher.info("get-user-media","succeeded",{data:{audioConstraints:f}});a=[];for(var x in b.message)a.push(encodeURIComponent(x)+"="+encodeURIComponent(b.message[x]));x=a.join("&");"INCOMING"===b._direction?b.mediaStream.answerIncomingCall.call(b.mediaStream,b.parameters.CallSid,b.options.offerSdp,b.options.rtcConstraints,b.options.iceServers,m):(b.pstream.once("answer",b._onAnswer),b.mediaStream.makeOutgoingCall.call(b.mediaStream,x,b.outboundConnectionId,b.options.rtcConstraints,
b.options.iceServers,e));b._onHangup=function(a){if(a.callsid&&(b.parameters.CallSid||b.outboundConnectionId)){if(a.callsid!=b.parameters.CallSid&&a.callsid!=b.outboundConnectionId)return}else if(a.callsid)return;b.log("Received HANGUP from gateway");a.error&&(a={code:a.error.code||31E3,message:a.error.message||"Error sent from gateway in HANGUP",connection:b},b.log("Received an error from the gateway:",a),b.emit("error",a));b.sendHangup=!1;b._publisher.info("connection","disconnected-by-remote");
b._disconnect();c(b)};b.pstream.addListener("hangup",b._onHangup)}},f)};a.prototype.reject=function(a){if("function"==typeof a)return this.addListener("reject",a);"pending"==this._status&&(this.pstream.publish("reject",{callsid:this.parameters.CallSid}),this.emit("reject"),this.mediaStream.reject(this.parameters.CallSid),this._publisher.info("connection","rejected-by-local"))};a.prototype.ignore=function(a){if("function"==typeof a)return this.addListener("cancel",a);"pending"==this._status&&(this._status=
"closed",this.emit("cancel"),this.mediaStream.ignore(this.parameters.CallSid),this._publisher.info("connection","ignored-by-local"))};a.prototype.cancel=function(a){this.log.deprecated(".cancel() is deprecated. Please use .ignore() instead.");this.ignore(a)};a.prototype.disconnect=function(a){if("function"===typeof a)return this.addListener("disconnect",a);this._publisher.info("connection","disconnected-by-local");this._disconnect()};a.prototype._disconnect=function(a){a="string"===typeof a?a:null;
if("open"==this._status||"connecting"==this._status){this.log("Disconnecting...");if(null!=this.pstream&&"disconnected"!=this.pstream.status&&this.sendHangup){var b=this.parameters.CallSid||this.outboundConnectionId;b&&(b={callsid:b},a&&(b.message=a),this.pstream.publish("hangup",b))}c(this);this.mediaStream.close()}};a.prototype.error=function(a){if("function"==typeof a)return this.addListener("error",a)};a.prototype._die=function(a,b){this.emit("error",{message:a,code:b});this._disconnect()};k.Connection=
a},{"./eventpublisher":5,"./log":7,"./rtc":11,"./rtc/monitor":13,"./util":20,events:24,util:43}],4:[function(g,n,k){function a(c,d){if(!l.enabled())throw new e.Exception("twilio.js 1.3 requires WebRTC/ORTC browser support. For more information, see <https://www.twilio.com/docs/api/client/twilio-js>. If you have any questions about this announcement, please contact Twilio Support at <help@twilio.com>.");if(!(this instanceof a))return new a(c,d);e.monitorEventEmitter("Twilio.Device",this);if(!c)throw new e.Exception("Capability token is not valid or missing.");
for(i in d);var w={logPrefix:"[Device]",chunderw:"chunderw-vpc-gll.twilio.com",eventgw:"eventgw.twilio.com",soundCacheFactory:p,soundFactory:f,connectionFactory:v,pStreamFactory:m,noRegister:!1,encrypt:!1,closeProtection:!1,secureSignaling:!0,warnings:!0,audioConstraints:!0,iceServers:[],region:"gll",dscp:!0,sounds:{}};d=d||{};var t=d.chunderw,g;for(g in w)g in d||(d[g]=w[g]);d.rtcConstraints=d.dscp?{optional:[{googDscp:!0}]}:{};this.options=d;this.token=c;this._region=this._status="offline";this.connections=
[];this.sounds=new q({incoming:!0,outgoing:!0,disconnect:!0});b.mixinLog(this,this.options.logPrefix);this.log.enabled=this.options.debug;w={gll:"chunderw-vpc-gll.twilio.com",au1:"chunderw-vpc-gll-au1.twilio.com",br1:"chunderw-vpc-gll-br1.twilio.com",de1:"chunderw-vpc-gll-de1.twilio.com",ie1:"chunderw-vpc-gll-ie1.twilio.com",jp1:"chunderw-vpc-gll-jp1.twilio.com",sg1:"chunderw-vpc-gll-sg1.twilio.com",us1:"chunderw-vpc-gll-us1.twilio.com","us1-ix":"chunderw-vpc-gll-us1-ix.twilio.com","us2-ix":"chunderw-vpc-gll-us2-ix.twilio.com",
"ie1-ix":"chunderw-vpc-gll-ie1-ix.twilio.com"};g={au:"au1",br:"br1",ie:"ie1",jp:"jp1",sg:"sg1","us-va":"us1","us-or":"us1"};var x=d.region.toLowerCase();x in g&&(this.log.deprecated("Region "+x+" is deprecated, please use "+g[x]+"."),x=g[x]);if(!(x in w))throw new e.Exception("Region "+d.region+" is invalid. Valid values are: "+Object.keys(w).join(", "));d.chunderw=t||w[x];this.soundcache=this.options.soundCacheFactory();t="undefined"===typeof document?{}:document.createElement("audio");canPlayMp3=
!1;try{canPlayMp3=!(!t.canPlayType||!t.canPlayType("audio/mpeg").replace(/no/,""))}catch(D){}canPlayVorbis=!1;try{canPlayVorbis=!(!t.canPlayType||!t.canPlayType('audio/ogg;codecs="vorbis"').replace(/no/,""))}catch(D){}t="mp3";canPlayVorbis&&!canPlayMp3&&(t="ogg");w={incoming:{filename:"incoming",loop:!0},outgoing:{filename:"outgoing",maxDuration:3E3},disconnect:{filename:"disconnect",maxDuration:3E3},dtmf1:{filename:"dtmf-1",maxDuration:1E3},dtmf2:{filename:"dtmf-2",maxDuration:1E3},dtmf3:{filename:"dtmf-3",
maxDuration:1E3},dtmf4:{filename:"dtmf-4",maxDuration:1E3},dtmf5:{filename:"dtmf-5",maxDuration:1E3},dtmf6:{filename:"dtmf-6",maxDuration:1E3},dtmf7:{filename:"dtmf-7",maxDuration:1E3},dtmf8:{filename:"dtmf-8",maxDuration:1E3},dtmf9:{filename:"dtmf-9",maxDuration:1E3},dtmf0:{filename:"dtmf-0",maxDuration:1E3},dtmfs:{filename:"dtmf-star",maxDuration:1E3},dtmfh:{filename:"dtmf-hash",maxDuration:1E3}};g=e.getTwilioRoot()+"sounds/releases/"+e.getSoundVersion()+"/";for(var u in w){var x=w[u],k=this.options.soundFactory(x);
k.load(g+x.filename+"."+t);this.soundcache.add(u,k)}this.soundcache.envelope("incoming",{release:2E3});var h=this;this.addListener("incoming",function(a){a.once("accept",function(){h.soundcache.stop("incoming")});a.once("cancel",function(){h.soundcache.stop("incoming")});a.once("error",function(){h.soundcache.stop("incoming")});a.once("reject",function(){h.soundcache.stop("incoming")});h.sounds.incoming()&&h.soundcache.play("incoming",0,1E3)});this.mediaPresence={audio:!this.options.noRegister};this.register(this.token);
var r=this,z=this.options.closeProtection;z&&(u=function(a){if("busy"==h._status||r.connections[0]){var b=1==z?"A call is currently in-progress. Leaving or reloading this page will end the call.":z;return(a||window.event).returnValue=b}},"undefined"!==typeof window&&(window.addEventListener?window.addEventListener("beforeunload",u):window.attachEvent&&window.attachEvent("onbeforeunload",u)));u=function(){h.disconnectAll()};"undefined"!==typeof window&&(window.addEventListener?window.addEventListener("unload",
u):window.attachEvent&&window.attachEvent("onunload",u));this.on("error",function(){});return this}function c(a,b,f){var c={publishEvents:a.options.publishEvents,debug:a.options.debug,encrypt:a.options.encrypt,warnings:a.options.warnings};f=f||{};for(var e in c)e in f||(f[e]=c[e]);var m=a.options.connectionFactory(a,b,f);m.once("accept",function(){a._status="busy";a.emit("connect",m)});m.addListener("error",function(b){a.emit("error",b);"pending"==m.status()&&"connecting"==m.status()&&a._removeConnection(m)});
m.once("cancel",function(){a.log("Canceled: "+m.parameters.CallSid);a._removeConnection(m);a.emit("cancel",m)});m.once("disconnect",function(){"busy"==a._status&&(a._status="ready");a.emit("disconnect",m);a._removeConnection(m)});m.once("reject",function(){a.log("Rejected: "+m.parameters.CallSid);a._removeConnection(m)});return m}n=g("events").EventEmitter;var d=g("util"),b=g("./log"),e=g("./util"),l=g("./rtc"),q=g("./options").Options,f=g("./sound").Sound,p=g("./soundcache").SoundCache,v=g("./connection").Connection,
m=g("./pstream").PStream;d.inherits(a,n);a.toString=function(){return"[Twilio.Device class]"};a.prototype.toString=function(){return"[Twilio.Device instance]"};a.prototype.register=function(a){var b=e.objectize(a);this._accountSid=b.iss;this._clientName=b.scope["client:incoming"]?b.scope["client:incoming"].params.clientName:null;this.stream&&"disconnected"!=this.stream.status?(this.stream.setToken(a),this.publisher.setToken(a)):this._setupStream(a)};a.prototype.registerPresence=function(){this.token&&
(e.objectize(this.token).scope["client:incoming"]&&(this.mediaPresence.audio=!0),this._sendPresence())};a.prototype.unregisterPresence=function(){this.mediaPresence.audio=!1;this._sendPresence()};a.prototype.connect=function(a,b){if("function"==typeof a)return this.addListener("connect",a);a=a||{};b=b||this.options.audioConstraints;var f=c(this,a);this.connections.push(f);if(this.sounds.outgoing()){var m=this;f.accept(function(){m.soundcache.play("outgoing")})}f.accept(b);return f};a.prototype.disconnectAll=
function(){for(var a=[].concat(this.connections),b=0;b<a.length;b++)a[b].disconnect();0<this.connections.length&&this.log("Connections left pending: "+this.connections.length)};a.prototype.destroy=function(){this._stopRegistrationTimer();this.stream&&(this.stream.destroy(),this.stream=null)};a.prototype.disconnect=function(a){this.addListener("disconnect",a)};a.prototype.incoming=function(a){this.addListener("incoming",a)};a.prototype.offline=function(a){this.addListener("offline",a)};a.prototype.ready=
function(a){this.addListener("ready",a)};a.prototype.error=function(a){this.addListener("error",a)};a.prototype.status=function(){return this._status};a.prototype.activeConnection=function(){return this.connections[0]};a.prototype.region=function(){return this._region};a.prototype._sendPresence=function(){this.stream.register(this.mediaPresence);this.mediaPresence.audio?this._startRegistrationTimer():this._stopRegistrationTimer()};a.prototype._startRegistrationTimer=function(){clearTimeout(this.regTimer);
var a=this;this.regTimer=setTimeout(function(){a._sendPresence()},3E4)};a.prototype._stopRegistrationTimer=function(){clearTimeout(this.regTimer)};a.prototype._setupStream=function(a){var b=this;this.log("Setting up PStream");this.stream=this.options.pStreamFactory(a,{chunderw:this.options.chunderw,debug:this.options.debug,secureSignaling:this.options.secureSignaling});this.stream.addListener("connected",function(a){b._region={US_EAST_VIRGINIA:"us1",US_WEST_OREGON:"us2",ASIAPAC_SYDNEY:"au1",SOUTH_AMERICA_SAO_PAULO:"br1",
EU_IRELAND:"ie1",ASIAPAC_TOKYO:"jp1",ASIAPAC_SINGAPORE:"sg1"}[a.region]||a.region;b._sendPresence()});this.stream.addListener("ready",function(){b.log("Stream is ready");"offline"==b._status&&(b._status="ready");b.emit("ready",b)});this.stream.addListener("offline",function(){b.log("Stream is offline");b._status="offline";b._region="offline";b.emit("offline",b)});this.stream.addListener("error",function(a){var f=a.error;f&&(a.callsid&&(f.connection=b._findConnection(a.callsid)),31205===f.code&&b._stopRegistrationTimer(),
b.log("Received error: ",f),b.emit("error",f))});this.stream.addListener("invite",function(a){if("busy"==b._status)b.log("Device busy; ignoring incoming invite");else if(a.callsid&&a.sdp){var f=a.parameters||{};f.CallSid=f.CallSid||a.callsid;a=c(b,{},{offerSdp:a.sdp,callParameters:f});b.connections.push(a);b.emit("incoming",a)}else b.emit("error",{message:"Malformed invite from gateway"})})};a.prototype._removeConnection=function(a){for(var b=this.connections.length-1;0<=b;b--)a==this.connections[b]&&
this.connections.splice(b,1)};a.prototype._findConnection=function(a){for(var b=0;b<this.connections.length;b++){var f=this.connections[b];if(f.parameters.CallSid==a||f.outboundConnectionId==a)return f}};a=function(b){var f=[],c=[],m=function(a){if(b.instance)return a();c.push(a)},d=function(a){a=(a.code?a.code+": ":"")+a.message;if(b.instance){for(var h=0,f=b.instance.listeners("error"),c=0;c<f.length;c++)f[c]!==d&&h++;if(1<h)return;b.instance.log(a)}throw new e.Exception(a);},x={instance:null,setup:function(m,
h){if(b.instance)b.instance.log("Found existing Device; using new token but ignoring options"),b.instance.token=m,b.instance.register(m);else{b.instance=new a(m,h);b.error(d);b.sounds=b.instance.sounds;for(var r=0;r<c.length;r++)c[r]();c=[]}for(r=0;r<f.length;r++)f[r](m,h);f=[];return b},connect:function(a,h){if("function"==typeof a)m(function(){b.instance.addListener("connect",a)});else{if(!b.instance)throw new e.Exception("Run Twilio.Device.setup()");if(0<b.instance.connections.length)b.instance.emit("error",
{message:"A connection is currently active"});else return b.instance.connect(a,h)}},disconnectAll:function(){m(function(){b.instance.disconnectAll()});return b},disconnect:function(a){m(function(){b.instance.addListener("disconnect",a)});return b},status:function(){if(!b.instance)throw new e.Exception("Run Twilio.Device.setup()");return b.instance.status()},region:function(){if(!b.instance)throw new e.Exception("Run Twilio.Device.setup()");return b.instance.region()},ready:function(a){m(function(){b.instance.addListener("ready",
a)});return b},error:function(a){m(function(){a!=d&&b.instance.removeListener("error",d);b.instance.addListener("error",a)});return b},offline:function(a){m(function(){b.instance.addListener("offline",a)});return b},incoming:function(a){m(function(){b.instance.addListener("incoming",a)});return b},destroy:function(){b.instance&&b.instance.destroy();return b},cancel:function(a){m(function(){b.instance.addListener("cancel",a)});return b},activeConnection:function(){return b.instance?b.instance.activeConnection():
null}},l;for(l in x)b[l]=x[l];return b}(a);k.Device=a},{"./connection":3,"./log":7,"./options":8,"./pstream":9,"./rtc":11,"./sound":17,"./soundcache":18,"./util":20,events:24,util:43}],5:[function(g,n,k){function a(b,c,l){if(!(this instanceof a))return new a(b,c,l);l=Object.assign({defaultPayload:function(){return{}},host:"eventgw.twilio.com"},l);var e=l.defaultPayload;"function"!==typeof e&&(e=function(){return Object.assign({},l.defaultPayload)});var f=!0;Object.defineProperties(this,{_defaultPayload:{value:e},
_isEnabled:{get:function(){return f},set:function(a){f=a}},_host:{value:l.host},_request:{value:l.request||d},_token:{value:c,writable:!0},isEnabled:{enumerable:!0,get:function(){return f}},productName:{enumerable:!0,value:b},token:{enumerable:!0,get:function(){return this._token}}})}function c(a){return{timestamp:(new Date(a.timestamp)).toISOString(),total_packets_received:a.totals.packetsReceived,total_packets_lost:a.totals.packetsLost,total_packets_sent:a.totals.packetsSent,total_bytes_received:a.totals.bytesReceived,
total_bytes_sent:a.totals.bytesSent,packets_received:a.packetsReceived,packets_lost:a.packetsLost,packets_lost_fraction:a.packetsLostFraction&&Math.round(100*a.packetsLostFraction)/100,audio_level_in:a.audioInputLevel,audio_level_out:a.audioOutputLevel,call_volume_input:a.inputVolume,call_volume_output:a.outputVolume,jitter:a.jitter,rtt:a.rtt,mos:a.mos&&Math.round(100*a.mos)/100}}var d=g("./request");a.prototype._post=function(a,c,d,q,f,p,v){if(!this.isEnabled&&!v)return Promise.resolve();c={publisher:this.productName,
group:d,name:q,timestamp:(new Date).toISOString(),level:c.toUpperCase(),payload_type:"application/json","private":!1,payload:f&&f.forEach?f.slice(0):Object.assign(this._defaultPayload(p),f)};var b={url:"https://"+this._host+"/v2/"+a,body:c,headers:{"Content-Type":"application/json","X-Twilio-Token":this.token}},e=this;return new Promise(function(a,f){e._request.post(b,function(b){b?f(b):a()})})};a.prototype.post=function(a,c,d,q,f,p){return this._post("EndpointEvents",a,c,d,q,f,p)};a.prototype.debug=
function(a,c,d,q){return this.post("debug",a,c,d,q)};a.prototype.info=function(a,c,d,q){return this.post("info",a,c,d,q)};a.prototype.warn=function(a,c,d,q){return this.post("warning",a,c,d,q)};a.prototype.error=function(a,c,d,q){return this.post("error",a,c,d,q)};a.prototype.postMetrics=function(a,e,d,q){d=d.map(c).map(function(a){return Object.assign(a,q)});return this._post("EndpointMetrics","info",a,e,d)};a.prototype.setToken=function(a){this._token=a};a.prototype.enable=function(){this._isEnabled=
!0};a.prototype.disable=function(){this._isEnabled=!1};n.exports=a},{"./request":10}],6:[function(g,n,k){function a(c){if(!(this instanceof a))return new a(c);c=c||{};var d=function(){},d={interval:10,now:function(){return(new Date).getTime()},repeat:function(a,b){return setInterval(a,b)},stop:function(a,b){return clearInterval(a,b)},onsleep:d,onwakeup:d},b;for(b in d)b in c||(c[b]=d[b]);this.interval=c.interval;this.lastbeat=0;this.pintvl=null;this.onsleep=c.onsleep;this.onwakeup=c.onwakeup;this.repeat=
c.repeat;this.stop=c.stop;this.now=c.now}a.toString=function(){return"[Twilio.Heartbeat class]"};a.prototype.toString=function(){return"[Twilio.Heartbeat instance]"};a.prototype.beat=function(){this.lastbeat=this.now();if(this.sleeping()){if(this.onwakeup)this.onwakeup();var a=this;this.pintvl=this.repeat.call(null,function(){a.check()},1E3*this.interval)}};a.prototype.check=function(){var a=this.now()-this.lastbeat;if(!this.sleeping()&&a>=1E3*this.interval){if(this.onsleep)this.onsleep();this.stop.call(null,
this.pintvl);this.pintvl=null}};a.prototype.sleeping=function(){return null==this.pintvl};k.Heartbeat=a},{}],7:[function(g,n,k){k.mixinLog=function(a,c){function d(){if(d.enabled)for(var a=d.prefix?d.prefix+" ":"",c=0;c<arguments.length;c++){var l=arguments[c];d.handler("string"==typeof l?a+l:l)}}d.enabled=!0;d.prefix=c||"";d.defaultHandler=function(a){"undefined"!==typeof console&&console.log(a)};d.handler=d.defaultHandler;d.warnings=!0;d.defaultWarnHandler=function(a){"undefined"!==typeof console&&
("function"===typeof console.warn?console.warn(a):"function"===typeof console.log&&console.log(a))};d.warnHandler=d.defaultWarnHandler;d.deprecated=function(){if(d.warnings)for(var a=0;a<arguments.length;a++)d.warnHandler(arguments[a])};a.log=d}},{}],8:[function(g,n,k){g=function(){function a(d,b){if(!(this instanceof a))return new a(d);this.__dict__={};d=d||{};b=b||{};for(var e in d)this[e]=c(this.__dict__,e),this[e](d[e]);for(e in b)this[e](b[e])}function c(a,b){return function(c){return"undefined"==
typeof c?a[b]:a[b]=c}}return a}();k.Options=g},{}],9:[function(g,n,k){function a(c,q){if(!(this instanceof a))return new a(c,q);b.monitorEventEmitter("Twilio.PStream",this);var f={logPrefix:"[PStream]",chunderw:"chunderw-vpc-gll.twilio.com",secureSignaling:!0,transportFactory:e,debug:!1};q=q||{};for(var p in f)p in q||(q[p]=f[p]);this.options=q;this.token=c||"";this.status="disconnected";this.host=this.options.chunderw;this.region=this.gateway=null;d.mixinLog(this,this.options.logPrefix);this.log.enabled=
this.options.debug;this.on("error",function(){});var l=this;this.addListener("ready",function(){l.status="ready"});this.addListener("offline",function(){l.status="offline"});this.addListener("close",function(){l.destroy()});this.transport=this.options.transportFactory({host:this.host,debug:this.options.debug,secureSignaling:this.options.secureSignaling});this.transport.onopen=function(){l.status="connected";l.setToken(l.token)};this.transport.onclose=function(){"disconnected"!=l.status&&("offline"!=
l.status&&l.emit("offline",l),l.status="disconnected")};this.transport.onerror=function(a){l.emit("error",a)};this.transport.onmessage=function(a){a=b.splitObjects(a.data);for(var f=0;f<a.length;f++){var c=JSON.parse(a[f]),m=c.type,c=c.payload||{};c.gateway&&(l.gateway=c.gateway);c.region&&(l.region=c.region);l.emit(m,c)}};this.transport.open();return this}n=g("events").EventEmitter;var c=g("util"),d=g("./log"),b=g("./util");g("./rtc");g("./heartbeat");var e=g("./wstransport").WSTransport;c.inherits(a,
n);a.toString=function(){return"[Twilio.PStream class]"};a.prototype.toString=function(){return"[Twilio.PStream instance]"};a.prototype.setToken=function(a){this.log("Setting token and publishing listen");this.token=a;a={token:a,browserinfo:b.getSystemInfo()};this.publish("listen",a)};a.prototype.register=function(a){this.publish("register",{media:a})};a.prototype.destroy=function(){this.log("Closing PStream");this.transport.close();return this};a.prototype.publish=function(a,c){var f=JSON.stringify({type:a,
version:b.getPStreamVersion(),payload:c});this.transport.send(f)};k.PStream=a},{"./heartbeat":6,"./log":7,"./rtc":11,"./util":20,"./wstransport":21,events:24,util:43}],10:[function(g,n,k){var a="undefined"===typeof XMLHttpRequest?g("xmlhttprequest").XMLHttpRequest:XMLHttpRequest;g=function(c,d,b){var e;e=e||a;var l=new e;l.open(c,d.url,!0);l.onreadystatechange=function(){4===l.readyState&&(200<=l.status&&300>l.status?b(null,l.responseText):b(Error(l.responseText)))};for(var q in d.headers)l.setRequestHeader(q,
d.headers[q]);l.send(JSON.stringify(d.body))};g.get=function(a,d){return new this("GET",a,d)};g.post=function(a,d){return new this("POST",a,d)};n.exports=g},{xmlhttprequest:45}],11:[function(g,n,k){var a=g("./peerconnection");n.exports={enabled:function(c){"undefined"!==typeof c&&(a.enabled=c);return a.enabled},getMediaEngine:function(){return"undefined"!==typeof RTCIceGatherer?"ORTC":"WebRTC"},PeerConnection:a}},{"./peerconnection":15}],12:[function(g,n,k){function a(b){if(!(this instanceof a))return new a(b);
var f=this;Object.defineProperties(this,{size:{enumerable:!0,get:function(){return f._map.size}},_map:{value:b}});this[Symbol.iterator]=b[Symbol.iterator]}function c(a){return{type:"transport",id:a.id,timestamp:Date.parse(a.timestamp),bytesSent:void 0,bytesReceived:void 0,rtcpTransportStatsId:void 0,dtlsState:void 0,selectedCandidatePairId:a.stat("selectedCandidatePairId"),localCertificateId:a.stat("localCertificateId"),remoteCertificateId:a.stat("remoteCertificateId")}}function d(a){return{type:"codec",
id:a.id,timestamp:Date.parse(a.timestamp),payloadType:void 0,mimeType:a.stat("mediaType")+"/"+a.stat("googCodecName"),clockRate:void 0,channels:void 0,sdpFmtpLine:void 0,implementation:void 0}}function b(a){return{type:"track",id:a.id,timestamp:Date.parse(a.timestamp),trackIdentifier:a.stat("googTrackId"),remoteSource:void 0,ended:void 0,kind:a.stat("mediaType"),detached:void 0,ssrcIds:void 0,frameWidth:y(a,"googFrameWidthReceived")?t(a,"googFrameWidthReceived"):t(a,"googFrameWidthSent"),frameHeight:y(a,
"googFrameHeightReceived")?t(a,"googFrameHeightReceived"):t(a,"googFrameHeightSent"),framesPerSecond:void 0,framesSent:t(a,"framesEncoded"),framesReceived:void 0,framesDecoded:t(a,"framesDecoded"),framesDropped:void 0,framesCorrupted:void 0,partialFramesLost:void 0,fullFramesLost:void 0,audioLevel:y(a,"audioOutputLevel")?t(a,"audioOutputLevel")/32767:(t(a,"audioInputLevel")||0)/32767,echoReturnLoss:C(a,"googEchoCancellationReturnLoss"),echoReturnLossEnhancement:C(a,"googEchoCancellationReturnLossEnhancement")}}
function e(a,b){return{id:a.id,timestamp:Date.parse(a.timestamp),ssrc:a.stat("ssrc"),associateStatsId:void 0,isRemote:void 0,mediaType:a.stat("mediaType"),trackId:"track-"+a.id,transportId:a.stat("transportId"),codecId:"codec-"+a.id,firCount:b?t(a,"googFirsSent"):void 0,pliCount:b?t(a,"googPlisSent"):t(a,"googPlisReceived"),nackCount:b?t(a,"googNacksSent"):t(a,"googNacksReceived"),sliCount:void 0,qpSum:t(a,"qpSum")}}function l(a){var b=e(a,!0);Object.assign(b,{type:"inbound-rtp",packetsReceived:t(a,
"packetsReceived"),bytesReceived:t(a,"bytesReceived"),packetsLost:t(a,"packetsLost"),jitter:w(a.stat("googJitterReceived")),fractionLost:void 0,roundTripTime:w(a.stat("googRtt")),packetsDiscarded:void 0,packetsRepaired:void 0,burstPacketsLost:void 0,burstPacketsDiscarded:void 0,burstLossCount:void 0,burstDiscardCount:void 0,burstLossRate:void 0,burstDiscardRate:void 0,gapLossRate:void 0,gapDiscardRate:void 0,framesDecoded:t(a,"framesDecoded")});return b}function q(a){var b=e(a,!1);Object.assign(b,
{type:"outbound-rtp",remoteTimestamp:void 0,packetsSent:t(a,"packetsSent"),bytesSent:t(a,"bytesSent"),targetBitrate:void 0,framesEncoded:t(a,"framesEncoded")});return b}function f(a,b){var f=a.id,h=Date.parse(a.timestamp),c=a.stat("ipAddress"),m=t(a,"portNumber"),e=a.stat("transport"),d;a:switch(d=a.stat("candidateType"),d){case "peerreflexive":d="prflx";break a;case "serverreflexive":d="srflx"}return{type:b?"remote-candidate":"local-candidate",id:f,timestamp:h,transportId:void 0,isRemote:b,ip:c,
port:m,protocol:e,candidateType:d,priority:C(a,"priority"),url:void 0,relayProtocol:void 0,deleted:void 0}}function p(a){return{type:"candidate-pair",id:a.id,timestamp:Date.parse(a.timestamp),transportId:a.stat("googChannelId"),localCandidateId:a.stat("localCandidateId"),remoteCandidateId:a.stat("remoteCandidateId"),state:void 0,priority:void 0,nominated:void 0,writable:A(a,"googWritable"),readable:void 0,bytesSent:t(a,"bytesSent"),bytesReceived:t(a,"bytesReceived"),lastPacketSentTimestamp:void 0,
lastPacketReceivedTimestamp:void 0,totalRoundTripTime:void 0,currentRoundTripTime:w(a.stat("googRtt")),availableOutgoingBitrate:void 0,availableIncomingBitrate:void 0,requestsReceived:t(a,"requestsReceived"),requestsSent:t(a,"requestsSent"),responsesReceived:t(a,"responsesReceived"),responsesSent:t(a,"responsesSent"),retransmissionsReceived:void 0,retransmissionsSent:void 0,consentRequestsSent:t(a,"consentRequestsSent")}}function v(a){return{type:"certificate",id:a.id,timestamp:Date.parse(a.timestamp),
fingerprint:a.stat("googFingerprint"),fingerprintAlgorithm:a.stat("googFingerprintAlgorithm"),base64Certificate:a.stat("googDerBase64"),issuerCertificateId:a.stat("googIssuerId")}}function m(a){return{type:"data-channel",id:a.id,timestamp:Date.parse(a.timestamp),label:a.stat("label"),protocol:a.stat("protocol"),datachannelid:a.stat("datachannelid"),transportId:a.stat("transportId"),state:a.stat("state"),messagesSent:void 0,bytesSent:void 0,messagesReceived:void 0,bytesReceived:void 0}}function w(a){return isNaN(a)||
""===a?void 0:parseInt(a,10)/1E3}function t(a,b){var f=a.stat(b);return y(a,b)?parseInt(f,10):void 0}function C(a,b){var f=a.stat(b);return y(a,b)?parseFloat(f):void 0}function A(a,b){var f=a.stat(b);return y(a,b)?"true"===f||!0===f:void 0}function y(a,b){var f=a.stat(b);return"undefined"!==typeof f&&""!==f}if(g="undefined"!==typeof window?window.RTCStatsReport:void 0)a.prototype=Object.create(g.prototype),a.prototype.constructor=a;"entries forEach get has keys values".split(" ").forEach(function(b){a.prototype[b]=
function(){return this._map[b].apply(this._map,arguments)}});a.fromArray=function(b){return new a(b.reduce(function(a,b){a.set(b.id,b);return a},new Map))};a.fromRTCStatsResponse=function(e){var w,x=new Map;e=e.result().reduce(function(a,h){var r=h.id;switch(h.type){case "googCertificate":a.set(r,v(h));break;case "datachannel":a.set(r,m(h));break;case "googCandidatePair":A(h,"googActiveConnection")&&(w=r);a.set(r,p(h));break;case "localcandidate":a.set(r,f(h,!1));break;case "remotecandidate":a.set(r,
f(h,!0));break;case "ssrc":y(h,"packetsReceived")?a.set("rtp-"+r,l(h)):a.set("rtp-"+r,q(h));a.set("track-"+r,b(h));a.set("codec-"+r,d(h));break;case "googComponent":var e=c(h);x.set(e.selectedCandidatePairId,r);a.set(r,c(h))}return a},new Map);if(w){var h=x.get(w);h&&(e.get(h).dtlsState="connected")}return new a(e)};n.exports=a},{}],13:[function(g,n,k){function a(f){if(!(this instanceof a))return new a(f);f=f||{};var c=Object.assign({},q,f.thresholds);Object.defineProperties(this,{_activeWarnings:{value:new Map},
_currentStreaks:{value:new Map},_peerConnection:{value:f.peerConnection,writable:!0},_sampleBuffer:{value:[]},_sampleInterval:{value:null,writable:!0},_thresholds:{value:c},_warningsEnabled:{value:!0,writable:!0}});f.peerConnection&&this.enable();b.call(this)}function c(a,b){return b.reduce(function(b,f){return b+(f<a?1:0)},0)}function d(a,b){return b.reduce(function(b,f){return b+(f>a?1:0)},0)}var b=g("events").EventEmitter,e=g("./stats");k=g("util").inherits;var l=g("./mos"),q={audioInputLevel:{maxDuration:10},
audioOutputLevel:{maxDuration:10},packetsLostFraction:{max:1},jitter:{max:30},rtt:{max:400},mos:{min:3}};k(a,b);a.createSample=function(a,b){var c=a.packetsReceived-(b&&b.totals.packetsReceived||0),f=a.packetsLost-(b&&b.totals.packetsLost||0),e=c+f,e=0<e?f/e*100:100,d=a.packetsReceived+a.packetsLost;return{timestamp:a.timestamp,totals:{packetsReceived:a.packetsReceived,packetsLost:a.packetsLost,packetsSent:a.packetsSent,packetsLostFraction:0<d?a.packetsLost/d*100:100,bytesReceived:a.bytesReceived,
bytesSent:a.bytesSent},candidatePair:{localAddress:a.localAddress,localCandidateId:a.localCandidateId,localCandidateType:a.localCandidateType,remoteAddress:a.remoteAddress,remoteCandidateId:a.remoteCandidateId,remoteCandidateType:a.remoteCandidateType,transportType:a.transportType},packetsSent:a.packetsSent-(b&&b.totals.packetsSent||0),packetsReceived:c,packetsLost:f,packetsLostFraction:e,audioInputLevel:a.audioInputLevel,audioOutputLevel:a.audioOutputLevel,codecName:a.codecName,jitter:a.jitter,rtt:a.rtt,
mos:l.calculate(a,b&&e)}};a.prototype.enable=function(a){if(a){if(this._peerConnection&&a!==this._peerConnection)throw Error("Attempted to replace an existing PeerConnection in RTCMonitor.enable");this._peerConnection=a}if(!this._peerConnection)throw Error("Can not enable RTCMonitor without a PeerConnection");this._sampleInterval=this._sampleInterval||setInterval(this._fetchSample.bind(this),1E3);return this};a.prototype.disable=function(){clearInterval(this._sampleInterval);this._sampleInterval=
null;return this};a.prototype.getSample=function(){var b=this;return e(this._peerConnection).then(function(c){return a.createSample(c,b._sampleBuffer.length&&b._sampleBuffer[b._sampleBuffer.length-1])})};a.prototype._fetchSample=function(a){var b=this;return this.getSample().then(function(a){b._addSample(a);b._raiseWarnings();b.emit("sample",a);return a},function(a){b.disable();b.emit("error",a)})};a.prototype._addSample=function(a){var b=this._sampleBuffer;b.push(a);5<b.length&&b.splice(0,b.length-
5)};a.prototype._raiseWarnings=function(){if(this._warningsEnabled)for(var a in this._thresholds)this._raiseWarningsForStat(a)};a.prototype.enableWarnings=function(){this._warningsEnabled=!0;return this};a.prototype.disableWarnings=function(){this._warningsEnabled&&this._activeWarnings.clear();this._warningsEnabled=!1;return this};a.prototype._raiseWarningsForStat=function(a){var b=this._sampleBuffer,f=this._thresholds[a],m=b.slice(-5),m=m.map(function(b){return b[a]});if(!m.some(function(a){return"undefined"===
typeof a||null===a})){if("number"===typeof f.max){var e=d(f.max,m);3<=e?this._raiseWarning(a,"max",{values:m}):0>=e&&this._clearWarning(a,"max",{values:m})}"number"===typeof f.min&&(e=c(f.min,m),3<=e?this._raiseWarning(a,"min",{values:m}):0>=e&&this._clearWarning(a,"min",{values:m}));"number"===typeof f.maxDuration&&1<b.length&&(m=b.slice(-2),b=m[0][a],e=m[1][a],m=this._currentStreaks.get(a)||0,b=b===e?m+1:0,this._currentStreaks.set(a,b),b>=f.maxDuration?this._raiseWarning(a,"maxDuration",{value:b}):
0===b&&this._clearWarning(a,"maxDuration",{value:m}))}};a.prototype._clearWarning=function(a,b,c){var f=a+":"+b,e=this._activeWarnings.get(f);!e||5E3>Date.now()-e.timeRaised||(this._activeWarnings["delete"](f),this.emit("warning-cleared",Object.assign({name:a,threshold:{name:b,value:this._thresholds[a][b]}},c)))};a.prototype._raiseWarning=function(a,b,c){var f=a+":"+b;this._activeWarnings.has(f)||(this._activeWarnings.set(f,{timeRaised:Date.now()}),this.emit("warning",Object.assign({name:a,threshold:{name:b,
value:this._thresholds[a][b]}},c)))};n.exports=a},{"./mos":14,"./stats":16,events:24,util:43}],14:[function(g,n,k){function a(a){return"number"===typeof a&&!isNaN(a)&&isFinite(a)&&0<=a}n.exports={calculate:function(c,d){if(!(c&&a(c.rtt)&&a(c.jitter)&&a(d)))return null;var b,e=c.rtt+2*c.jitter+10;b=0;switch(!0){case 160>e:b=94.768-e/40;break;case 1E3>e:b=94.768-(e-120)/10;break;case 1E3<=e:b=94.768-e/100}e=.01;switch(!0){case -1===d:b=e=0;break;case d<=b/2.5:e=2.5;break;case d>b/2.5&&100>d:e=.25}b-=
d*e;b=1+.035*b+7E-6*b*(b-60)*(100-b);return 1<=b&&4.6>b?b:null}}},{}],15:[function(g,n,k){function a(b,c){if(!(this instanceof a))return new a(b,c);var f=function(){};this.onicecandidate=this.oniceconnectionstatechange=this.onsignalingstatechange=this.onreconnect=this.ondisconnect=this.onclose=this.onerror=this.onopen=f;this.version=null;this.pstream=c.stream;this.stream=null;this.video="undefined"!==typeof document&&document.createElement("video");this.video.autoplay="autoplay";this.device=c;this.status=
"connecting";this._dtmfSender=this.callSid=null;this._dtmfSenderUnsupported=!1;this._callEvents=[];this._nextTimeToPublish=Date.now();this._onAnswer=f;d.mixinLog(this,"[Twilio.PeerConnection]");this.log.enabled=this.device.options.debug;this.log.warnings=this.device.options.warnings;this._iceConnectionStateMachine=new e(l,"new");this._signalingStateMachine=new e(q,"stable");return this}function c(a){"function"===typeof MediaStreamTrack.prototype.stop?("function"===typeof a.getAudioTracks?a.getAudioTracks():
a.audioTracks).forEach(function(a){a.stop()}):a.stop()}var d=g("../log"),b=g("ortc-adapter");g("stacktrace-js");var e=g("../statemachine");g("../util");var l={"new":["checking","closed"],checking:["new","connected","failed","closed","completed"],connected:["new","disconnected","completed","closed"],completed:["new","disconnected","closed","completed"],failed:["new","disconnected","closed"],disconnected:["connected","completed","failed","closed"],closed:[]},q={stable:["have-local-offer","have-remote-offer",
"closed"],"have-local-offer":["stable","closed"],"have-remote-offer":["stable","closed"],closed:[]};a.prototype.uri=function(){return this._uri};a.prototype.openHelper=function(b,c){var f=this;a.getUserMedia({audio:c},function(a){f.stream=a;b()},function(a){a.code&&a.code===a.PERMISSION_DENIED||a.name&&"PermissionDeniedError"===a.name?b({error:a,message:"User denied access to microphone, or the web browser did not allow microphone access at this address.",code:31208}):b({error:a,message:"Error occurred while accessing microphone: "+
a.name+(a.message?" ("+a.message+")":""),code:31201})})};a.prototype._setupPeerConnection=function(b,c){var f=a.protocol;f.create(this.log,b,c);f.pc.addStream(this.stream);var e=this;f.pc.onaddstream=function(a){"undefined"!==typeof e.video.srcObject?e.video.srcObject=a.stream:"undefined"!==typeof e.video.mozSrcObject?e.video.mozSrcObject=a.stream:"undefined"!==typeof e.video.src?e.video.src=(window.URL||window.webkitURL).createObjectURL(a.stream):e.log("Error attaching stream to element.")};return f};
a.prototype._setupChannel=function(){var a=this,b=this.version.pc;a.version.pc.onopen=function(){a.status="open";a.onopen()};a.version.pc.onstatechange=function(b){a.version.pc&&"stable"==a.version.pc.readyState&&(a.status="open",a.onopen())};a.version.pc.onsignalingstatechange=function(c){c=b.signalingState;a.log('signalingState is "'+c+'"');try{a._signalingStateMachine.transition(c)}catch(m){}a.version.pc&&"stable"==a.version.pc.signalingState&&(a.status="open",a.onopen());a.onsignalingstatechange(b.signalingState)};
b.onicecandidate=function(b){a.onicecandidate(b.candidate)};b.oniceconnectionstatechange=function(){var c=b.iceConnectionState,e=a._iceConnectionStateMachine.currentState;try{a._iceConnectionStateMachine.transition(c)}catch(w){}switch(c){case "connected":"disconnected"===e&&(e="ICE liveliness check succeeded. Connection with Twilio restored",a.log(e),a.onreconnect(e));break;case "disconnected":e="ICE liveliness check failed. May be having trouble connecting to Twilio";a.log(e);a.ondisconnect(e);break;
case "failed":e=("checking"===e?"ICE negotiation with Twilio failed.":"Connection with Twilio was interrupted.")+" Call will terminate.";a.log(e);a.onerror({info:{code:31003,message:e},disconnect:!0});break;default:a.log('iceConnectionState is "'+c+'"')}a.oniceconnectionstatechange(c)}};a.prototype._initializeMediaStream=function(a,b){if("open"==this.status)return!1;if("disconnected"==this.pstream.status)return this.onerror({info:{code:31E3,message:"Cannot establish connection. Client is disconnected"}}),
this.close(),!1;this.version=this._setupPeerConnection(a,b);this._setupChannel();return!0};a.prototype.makeOutgoingCall=function(a,b,c,e,d){if(this._initializeMediaStream(c,e)){var f=this;this.callSid=b;var m=function(){d(f.version.pc)},l=function(a){f.onerror({info:{code:31E3,message:"Error processing answer: "+(a.message||a)}})};this._onAnswer=function(a){"closed"!=f.status&&f.version.processAnswer(a.sdp,m,l)};this.pstream.once("answer",this._onAnswer);this.version.createOffer({audio:!0},function(){"closed"!=
f.status&&f.pstream.publish("invite",{sdp:f.version.getSDP(),callsid:f.callSid,twilio:{params:a}})},function(a){f.onerror({info:{code:31E3,message:"Error creating the offer: "+(a.message||a)}})})}};a.prototype.answerIncomingCall=function(a,b,c,e,d){if(this._initializeMediaStream(c,e)){this.callSid=a;var f=this;this.version.processSDP(b,{audio:!0},function(){"closed"!=f.status&&(f.pstream.publish("answer",{callsid:a,sdp:f.version.getSDP()}),d(f.version.pc))},function(a){f.onerror({info:{code:31E3,
message:"Error creating the answer: "+(a.message||a)}})})}};a.prototype.close=function(){this.version&&this.version.pc&&("closed"!==this.version.pc.signalingState&&this.version.pc.close(),this.version.pc=null);this.stream&&(c(this.stream),this.stream=null);this.pstream&&this.pstream.removeListener("answer",this._onAnswer);this.video.src="";this.status="closed";this.onclose()};a.prototype.reject=function(a){this.callSid=a};a.prototype.ignore=function(a){this.callSid=a};a.prototype.attachAudio=function(a){this.stream&&
(("function"===typeof this.stream.getAudioTracks?this.stream.getAudioTracks():this.stream.audioTracks)[0].enabled=!0);a&&"function"==typeof a&&a()};a.prototype.detachAudio=function(a){this.stream&&(("function"===typeof this.stream.getAudioTracks?this.stream.getAudioTracks():this.stream.audioTracks)[0].enabled=!1);a&&"function"==typeof a&&a()};a.prototype.isAudioAttached=function(){return this.stream?("function"===typeof this.stream.getAudioTracks?this.stream.getAudioTracks():this.stream.audioTracks)[0].enabled:
!1};a.getUserMedia=function(a,b,c){"undefined"!=typeof navigator&&("function"==typeof navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(a,b,c):"function"==typeof navigator.mozGetUserMedia?navigator.mozGetUserMedia(a,b,c):"function"===typeof navigator.getUserMedia?navigator.getUserMedia(a,b,c):this.log("No getUserMedia() implementation available"))};a.prototype.getOrCreateDTMFSender=function(){if(this._dtmfSender)return this._dtmfSender;if(this._dtmfSenderUnsupported)return null;var a=this.version.pc;
if(!a)return this.log("No RTCPeerConnection available to call createDTMFSender on"),null;for(var b=a.getLocalStreams(),c,e,d=0;d<b.length;d++)if(c=b[d],c="function"===typeof c.getAudioTracks?c.getAudioTracks():c.audioTracks,c.length){e=c[0];break}if(!e)return this.log("No local audio MediaStreamTrack available on the RTCPeerConnection to pass to createDTMFSender"),null;if("function"===typeof a.getSenders&&(b=a.getSenders().find(function(a){return a.track===e}),b.dtmf))return this.log("Using RTCRtpSender#dtmf"),
this._dtmfSender=b.dtmf;if("function"===typeof a.createDTMFSender)return this.log("Creating RTCDTMFSender"),this._dtmfSender=a.createDTMFSender(e);this.log("RTCPeerConnection does not support RTCDTMFSender");this._dtmfSenderUnsupported=!0;return null};g=function(){"undefined"!=typeof window&&("function"==typeof window.webkitRTCPeerConnection?this.RTCPeerConnection=webkitRTCPeerConnection:"function"==typeof window.mozRTCPeerConnection?(this.RTCPeerConnection=mozRTCPeerConnection,RTCSessionDescription=
mozRTCSessionDescription,RTCIceCandidate=mozRTCIceCandidate):"undefined"!==typeof RTCIceGatherer?(this.RTCPeerConnection=b.RTCPeerConnection,RTCSessionDescription=b.RTCSessionDescription,RTCIceCandidate=b.RTCIceCandidate):this.log("No RTCPeerConnection implementation available"))};g.prototype.create=function(a,b,c){this.log=a;this.pc=new this.RTCPeerConnection({iceServers:c},b)};g.prototype.createModernConstraints=function(a){if("undefined"===typeof a)return null;var b={};"undefined"!==typeof webkitRTCPeerConnection?
(b.mandatory={},"undefined"!==typeof a.audio&&(b.mandatory.OfferToReceiveAudio=a.audio),"undefined"!==typeof a.video&&(b.mandatory.OfferToReceiveVideo=a.video)):("undefined"!==typeof a.audio&&(b.offerToReceiveAudio=a.audio),"undefined"!==typeof a.video&&(b.offerToReceiveVideo=a.video));return b};g.prototype.createOffer=function(a,b,c){var e=this;this.pc.createOffer(function(a){e.pc&&e.pc.setLocalDescription(new RTCSessionDescription(a),b,c)},c,this.createModernConstraints(a))};g.prototype.createAnswer=
function(a,b,c){var e=this;this.pc.createAnswer(function(a){e.pc&&e.pc.setLocalDescription(new RTCSessionDescription(a),b,c)},c,this.createModernConstraints(a))};g.prototype.processSDP=function(a,b,c,e){var d=this;this.pc.setRemoteDescription(new RTCSessionDescription({sdp:a,type:"offer"}),function(){d.createAnswer(b,c,e)},e)};g.prototype.getSDP=function(){return this.pc.localDescription.sdp};g.prototype.processAnswer=function(a,b,c){this.pc&&this.pc.setRemoteDescription(new RTCSessionDescription({sdp:a,
type:"answer"}),b,c)};g.test=function(){if("object"==typeof navigator){if(navigator.webkitGetUserMedia&&"function"==typeof window.webkitRTCPeerConnection)return!0;if(navigator.mozGetUserMedia&&"function"==typeof window.mozRTCPeerConnection){try{if("function"!==typeof(new window.mozRTCPeerConnection).getLocalStreams)return!1}catch(f){return!1}return!0}if("undefined"!==typeof RTCIceGatherer)return!0}};g=g.test()?new g:null;a.protocol=g;a.enabled=!!a.protocol;n.exports=a},{"../log":7,"../statemachine":19,
"../util":20,"ortc-adapter":27,"stacktrace-js":40}],16:[function(g,n,k){function a(){}function c(b){var c=null,e=new a;Array.from(b.values()).forEach(function(a){switch(a.type.replace("-","")){case "inboundrtp":e.timestamp=a.timestamp;e.jitter=1E3*a.jitter;e.packetsLost=a.packetsLost;e.packetsReceived=a.packetsReceived;e.bytesReceived=a.bytesReceived;if(a=b.get(a.trackId))e.audioOutputLevel=32767*a.audioLevel;break;case "outboundrtp":e.packetsSent=a.packetsSent;e.bytesSent=a.bytesSent;if(a.codecId){var d=
b.get(a.codecId).mimeType;e.codecName=d&&d.match(/(.*\/)?(.*)/)[2]}if(a=b.get(a.trackId))e.audioInputLevel=32767*a.audioLevel;break;case "transport":"connected"===a.dtlsState&&(c=a.id)}});var d=b.get(c);if(!d)return e;d=b.get(d.selectedCandidatePairId);if(!d)return e;var g=b.get(d.localCandidateId),k=b.get(d.remoteCandidateId);Object.assign(e,{localAddress:g&&g.ip,remoteAddress:k&&k.ip,rtt:d&&1E3*d.currentRoundTripTime});return e}var d=g("./mockrtcstatsreport"),b=!1;"undefined"!==typeof window&&window.navigator&&
(b=window.navigator.userAgent.match("CriOS")||window.chrome&&"Google Inc."===window.navigator.vendor&&-1===window.navigator.userAgent.indexOf("OPR")&&-1===window.navigator.userAgent.indexOf("Edge"));n.exports=function(a,l){l=Object.assign({createRTCSample:c},l);if(!a)return Promise.reject(Error("PeerConnection is null"));if("function"!==typeof a.getStats)return Promise.reject(Error("WebRTC statistics are unsupported"));if(b)return(new Promise(function(b,c){return a.getStats(b,c)})).then(d.fromRTCStatsResponse).then(l.createRTCSample);
var e;try{e=a.getStats()}catch(f){e=(new Promise(function(b,c){return a.getStats(b,c)})).then(d.fromRTCStatsResponse)}return e.then(l.createRTCSample)}},{"./mockrtcstatsreport":12}],17:[function(g,n,k){function a(c){if(!(this instanceof a))return new a(c);this.id=a.nextId++;this.maxDuration=c.maxDuration;a.items[this.id]=this;this.create(!!c.loop);return this}g={create:function(a){this.audio=document.createElement("audio");this.audio.loop=a;this.playing=!1;var b=this;this.audio.addEventListener("ended",
function(){b.playing=!1})},buffer:function(){},play:function(){if(!this.playing){var a=this.audio;this.rewind();var b=this,c=this.maxDuration;c&&c<1E3*a.duration&&setTimeout(function(){a.pause();b.playing=!1},c);this.playing=!0;a.play()}},load:function(a){this.audio.src=a},stop:function(){this.playing=!1;this.audio.pause();this.rewind()},destroy:function(){this.audio.src="";delete this.audio},rewind:function(){this.audio.currentTime=0;this.audio.currentTime&&this.audio.load()}};n={create:function(){},
buffer:function(a){},play:function(){},load:function(a){},stop:function(){},destroy:function(){}};if("undefined"===typeof window)for(var c in n)a.prototype[c]=n[c];else a.prototype=g;a.nextId=0;a.debug=!1;a.tasks=[];a.items={};k.Sound=a},{}],18:[function(g,n,k){function a(a,b){return function(){var c=Array.prototype.slice(arguments);b.apply(a,c)}}function c(){if(!(this instanceof c))return new c;this.cache={}}c.prototype.add=function(a,b,c){c=c||{};if(!(c instanceof Object))throw new TypeError("Bad envelope type; expected Object");
b instanceof Array||(b=[b]);this.cache[a]={starttime:null,sounds:b,envelope:c}};c.prototype.play=function(a,b,c){b=b||0;c=c||1;if(a in this.cache){a=this.cache[a];for(var e=0;e<a.sounds.length;e++)a.sounds[e].play(b,c);a.starttime=(new Date).getTime()}};c.prototype.stop=function(a){if(a in this.cache){var b=this.cache[a];a=b.envelope.release||0;var c=function(){for(var a=0;a<b.sounds.length;a++)b.sounds[a].stop()},d=(new Date).getTime(),d=Math.max(0,a-(d-b.starttime));0==a?c():setTimeout(c,d)}};c.prototype.envelope=
function(a,b){if(a in this.cache){var c=this.cache[a],d;for(d in b)c.envelope[d]=b[d]}};c.prototype.playseq=function(){var c=null,b=[],e=function(){var d=b.shift();if(d){var q=d[0],f=d[1]||0,d=d[2]||0;q in this.cache&&this.play(q);c=setTimeout(a(this,e),f+d)}else c=null};return function(d){for(var l=0;l<d.length;l++)b.push(d[l]);null==c&&(c=setTimeout(a(this,e),0))}}();k.SoundCache=c},{}],19:[function(g,n,k){function a(b,c){if(!(this instanceof a))return new a(b,c);var e=c;Object.defineProperties(this,
{_currentState:{get:function(){return e},set:function(a){e=a}},currentState:{enumerable:!0,get:function(){return e}},states:{enumerable:!0,value:b},transitions:{enumerable:!0,value:[]}});Object.freeze(this)}function c(a,c){Object.defineProperties(this,{from:{enumerable:!0,value:a},to:{enumerable:!0,value:c}})}function d(a,e){if(!(this instanceof d))return new d(a,e);Error.call(this);c.call(this,a,e);Object.defineProperties(this,{message:{enumerable:!0,value:"Invalid transition from "+("string"===
typeof a?'"'+a+'"':"null")+' to "'+e+'"'}});Object.freeze(this)}g=g("util").inherits;a.prototype.transition=function(a){var b=this.currentState,l=this.states[b],b=l&&-1!==l.indexOf(a)?new c(b,a):new d(b,a);this.transitions.push(b);this._currentState=a;if(b instanceof d)throw b;return this};g(d,Error);n.exports=a},{util:43}],20:[function(g,n,k){(function(a){function c(a){if(!(this instanceof c))return new c(a);this.message=a}function d(a){return function(){var b=Array.prototype.slice.call(arguments,
0);a.memo=a.memo||{};return a.memo[b]?a.memo[b]:a.memo[b]=a.apply(null,b)}}function b(a){a=a.split(".");if(3!=a.length)throw new c("Wrong number of segments");return w(a[1])}function e(a){if(""==a)return{};if(-1==a.indexOf("&")&&-1==a.indexOf("="))return a;a=a.split("&");for(var b={},c=0;c<a.length;c++){var h=a[c].split("=");b[decodeURIComponent(h[0])]=e(decodeURIComponent(h[1]))}return b}function l(b){try{return btoa(b)}catch(u){return(new a(b)).toString("base64")}}function q(b){try{return atob(b)}catch(u){try{return(new a(b,
"base64")).toString("ascii")}catch(B){return base64.decode(b)}}}function f(a){var b=[],c;for(c in a){var h="object"==typeof a[c]?f(a[c]):a[c];b.push(encodeURIComponent(c)+"="+encodeURIComponent(h))}return b.join("&")}function p(a,b){return a===b?!0:typeof a!==typeof b?!1:a instanceof Date&&b instanceof Date?a.getTime()===b.getTime():"object"!==typeof a&&"object"!==typeof b?a==b:v(a,b)}function v(a,b){if(void 0===a||null===a||void 0===b||null===b||a.prototype!==b.prototype)return!1;try{var c=y(a),
h=y(b)}catch(z){return!1}if(c.length!==h.length)return!1;c.sort();h.sort();for(h=c.length-1;0<=h;h--){var e=c[h];if(!p(a[e],b[e]))return!1}return!0}var m=g("events").EventEmitter;c.prototype.toString=function(){return"Twilio.Exception: "+this.message};var w=d(function(a){var b=a.length%4;0<b&&(a+=Array(4-b+1).join("="));a=a.replace(/-/g,"+").replace(/_/g,"/");a=q(a);return JSON.parse(a)}),t=d(function(a){a=b(a);for(var d=0===a.scope.length?[]:a.scope.split(" "),f={},h=0;h<d.length;h++){var r;r=d[h].match(/^scope:(\w+):(\w+)\??(.*)$/);
if(!r||4!=r.length)throw new c("Bad scope URI");r={service:r[1],privilege:r[2],params:e(r[3])};f[r.service+":"+r.privilege]=r}a.scope=f;return a}),n=function(){function a(){this.set={}}a.prototype.clear=function(){this.set={}};a.prototype.put=function(b){return this.set[b]=a.DUMMY};a.prototype.del=function(a){return delete this.set[a]};a.prototype.map=function(a,b){var h=[],c;for(c in this.set)h.push(a.call(b,c));return h};a.DUMMY={};return a}(),A="",y="function"===typeof Object.keys?Object.keys:
function(a){var b=[],c;for(c in a)b.push(c);return b};k.getPStreamVersion=function(){return"1.3"};k.getReleaseVersion=function(){return"1.3.21"};k.getSoundVersion=function(){return"1.0.0"};k.encodescope=function(a,b,c){a=["scope",a,b].join(":");b=!0;for(var h in c){b=!1;break}return b?a:a+"?"+f(c)};k.dummyToken=function(a){var b={iss:"AC1111111111111111111111111111111",exp:14E8},c;for(c in b)a[c]=a[c]||b[c];a=l(JSON.stringify(a));a=a.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_");return["*",
a,"*"].join(".")};k.Exception=c;k.decode=b;k.btoa=l;k.atob=q;k.objectize=t;k.urlencode=function(a,b){var c=[];b=b||!1;for(var h in a)if(b&&a[h]instanceof Array)for(var e in a[h]){var d=a[h][e];c.push(encodeURIComponent(h)+"="+encodeURIComponent(d))}else d=a[h],c.push(encodeURIComponent(h)+"="+encodeURIComponent(d));return c.join("&")};k.Set=n;k.bind=function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);return a.apply(b,c.concat(h))}};
k.getSystemInfo=function(){g("./rtc");var a="undefined"!=typeof navigator?navigator:{};return{p:"browser",v:"1.3",h:"062a1fe",browser:{userAgent:a.userAgent||"unknown",platform:a.platform||"unknown"},plugin:"rtc"}};k.splitObjects=function(a,b){var c;c="string"!=typeof a?"":a.trim?a.trim():a.replace(/^\s+|\s+$/g,"");return 0==c.length?[]:c.split("\n")};k.generateConnectionUUID=function(){return"TJSxxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==
a?b:b&3|8).toString(16)})};k.getTwilioRoot=function(){return A};k.setTwilioRoot=function(a){A=a};k.monitorEventEmitter=function(a,b){function c(h){var e=m.listenerCount(b,h);h="The number of "+h+" listeners on "+a+" exceeds the recommended number of 10. While twilio.js will continue to function normally, this may be indicative of an application error. Note that "+h+" listeners exist for the lifetime of the "+a+".";10<=e&&("undefined"!==typeof console&&(console.warn?console.warn(h):console.log&&console.log(h)),
b.removeListener("newListener",c))}b.setMaxListeners(0);b.on("newListener",c)};k.deepEqual=p}).call(this,g("buffer").Buffer)},{"./rtc":11,buffer:23,events:24}],21:[function(g,n,k){function a(b){var c=this instanceof a?this:new a(b);c.sock=null;var e=function(){};c.onopen=e;c.onclose=e;c.onmessage=e;c.onerror=e;e={logPrefix:"[WSTransport]",chunderw:"chunderw-vpc-gll.twilio.com",reconnect:!0,debug:!1,secureSignaling:!0};b=b||{};for(var f in e)f in b||(b[f]=e[f]);c.options=b;d.mixinLog(c,c.options.logPrefix);
c.log.enabled=c.options.debug;c.defaultReconnect=c.options.reconnect;c.uri=(c.options.secureSignaling?"wss://":"ws://")+c.options.host+"/signal";return c}var c=g("./heartbeat").Heartbeat,d=g("./log"),b=g("ws");a.prototype.msgQueue=[];a.prototype.open=function(a){this.log("Opening socket");this.sock&&2>this.sock.readyState?this.log("Socket already open."):(this.options.reconnect=this.defaultReconnect,this.heartbeat&&(this.heartbeat.onsleep=function(){}),this.heartbeat=new c({interval:15}),this.sock=
this._connect(a))};a.prototype.send=function(a){if(this.sock)if(0==this.sock.readyState)this.msgQueue.push(a);else try{this.sock.send(a)}catch(l){this.log("Error while sending. Closing socket: "+l.message),this.sock.close()}};a.prototype.close=function(){this.log("Closing socket");this.options.reconnect=!1;this.sock&&(this.sock.close(),this.sock=null);this.heartbeat.onsleep=function(){}};a.prototype._cleanupSocket=function(a){if(a){this.log("Cleaning up socket");var b=function(){};a.onopen=function(){a.close()};
a.onmessage=b;a.onerror=b;a.onclose=b;2>a.readyState&&a.close()}};a.prototype._connect=function(a){var c=++a||1;this.log("attempting to connect");var e=null;try{e=new b(this.uri)}catch(w){this.onerror({code:31E3,message:w.message||"Could not connect to "+this.uri});this.close();return}var d=this,g=this.sock,k=null,m=setTimeout(function(){d.log("connection attempt timed out");e.onclose=function(){};e.close();d.onclose();d._tryReconnect(c)},5E3);e.onopen=function(){clearTimeout(m);d._cleanupSocket(g);
k=(new Date).getTime();d.log("Socket opened");d.heartbeat.onsleep=function(){d.log("Heartbeat timed out. closing socket");d.sock.onclose=function(){};d.sock.close();d.onclose();d._tryReconnect(c)};d.heartbeat.beat();d.onopen();for(var a=0;a<d.msgQueue.length;a++)d.sock.send(d.msgQueue[a]);d.msgQueue=[]};e.onclose=function(){clearTimeout(m);d._cleanupSocket(g);d.heartbeat.onsleep=function(){};k&&10<((new Date).getTime()-k)/1E3&&(c=1);d.log("Socket closed");d.onclose();d._tryReconnect(c)};e.onerror=
function(a){d.log("Socket received error: "+a.message);d.onerror({code:31E3,message:a.message||"WSTransport socket error"})};e.onmessage=function(a){d.heartbeat.beat();if("\n"==a.data)d.send("\n");else d.onmessage(a)};return e};a.prototype._tryReconnect=function(a){a=a||0;if(this.options.reconnect){this.log("Attempting to reconnect.");var b=this,c=0,c=5>a?30+Math.round(50*Math.random()*Math.pow(2,a)):3E3;setTimeout(function(){b.open(a)},c)}};k.WSTransport=a},{"./heartbeat":6,"./log":7,ws:44}],22:[function(g,
n,k){(function(a){function c(a){a=a.charCodeAt(0);if(43===a)return 62;if(47===a)return 63;if(48>a)return-1;if(58>a)return a-48+52;if(91>a)return a-65;if(123>a)return a-97+26}var d="undefined"!==typeof Uint8Array?Uint8Array:Array;a.toByteArray=function(a){function b(a){k[m++]=a}var l,g,f,p,k;if(0<a.length%4)throw Error("Invalid string. Length must be a multiple of 4");l=a.length;p="="===a.charAt(l-2)?2:"="===a.charAt(l-1)?1:0;k=new d(3*a.length/4-p);g=0<p?a.length-4:a.length;var m=0;for(l=0;l<g;l+=
4)f=c(a.charAt(l))<<18|c(a.charAt(l+1))<<12|c(a.charAt(l+2))<<6|c(a.charAt(l+3)),b((f&16711680)>>16),b((f&65280)>>8),b(f&255);2===p?(f=c(a.charAt(l))<<2|c(a.charAt(l+1))>>4,b(f&255)):1===p&&(f=c(a.charAt(l))<<10|c(a.charAt(l+1))<<4|c(a.charAt(l+2))>>2,b(f>>8&255),b(f&255));return k};a.fromByteArray=function(a){var b,c=a.length%3,d="",f,g;b=0;for(g=a.length-c;b<g;b+=3)f=(a[b]<<16)+(a[b+1]<<8)+a[b+2],f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>
12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f&63),d+=f;switch(c){case 1:f=a[a.length-1];d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>2);d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f<<4&63);d+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>
10),d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>4&63),d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f<<2&63),d+="="}return d}})("undefined"===typeof k?this.base64js={}:k)},{}],23:[function(g,n,k){function a(b,c,d){if(!(this instanceof a))return new a(b,c,d);var h=typeof b,e;if("number"===h)e=0<b?b>>>0:0;else if("string"===h){if("base64"===c)for(b=(b.trim?b.trim():b.replace(/^\s+|\s+$/g,"")).replace(B,"");0!==b.length%4;)b+="=";e=a.byteLength(b,
c)}else if("object"===h&&null!==b)"Buffer"===b.type&&y(b.data)&&(b=b.data),e=0<+b.length?Math.floor(+b.length):0;else throw new TypeError("must start with number, buffer, array or string");if(this.length>x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");var r;a.TYPED_ARRAY_SUPPORT?r=a._augment(new Uint8Array(e)):(r=this,r.length=e,r._isBuffer=!0);if(a.TYPED_ARRAY_SUPPORT&&"number"===typeof b.byteLength)r._set(b);else{var f=b;if(y(f)||a.isBuffer(f)||
f&&"object"===typeof f&&"number"===typeof f.length)if(a.isBuffer(b))for(c=0;c<e;c++)r[c]=b.readUInt8(c);else for(c=0;c<e;c++)r[c]=(b[c]%256+256)%256;else if("string"===h)r.write(b,0,c);else if("number"===h&&!a.TYPED_ARRAY_SUPPORT&&!d)for(c=0;c<e;c++)r[c]=0}return r}function c(a,b,c){var h="";for(c=Math.min(a.length,c);b<c;b++)h+=String.fromCharCode(a[b]);return h}function d(a,b,c){if(0!==a%1||0>a)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length");
}function b(b,c,d,e,f,m){if(!a.isBuffer(b))throw new TypeError("buffer must be a Buffer instance");if(c>f||c<m)throw new TypeError("value is out of bounds");if(d+e>b.length)throw new TypeError("index out of range");}function e(a,b,c,d){0>b&&(b=65535+b+1);for(var h=0,e=Math.min(a.length-c,2);h<e;h++)a[c+h]=(b&255<<8*(d?h:1-h))>>>8*(d?h:1-h)}function l(a,b,c,d){0>b&&(b=4294967295+b+1);for(var h=0,e=Math.min(a.length-c,4);h<e;h++)a[c+h]=b>>>8*(d?h:3-h)&255}function q(a,b,c,d,e,f){if(b>e||b<f)throw new TypeError("value is out of bounds");
if(c+d>a.length)throw new TypeError("index out of range");}function f(a,b,c,d,e){e||q(a,b,c,4,3.4028234663852886E38,-3.4028234663852886E38);A.write(a,b,c,d,23,4);return c+4}function p(a,b,c,d,e){e||q(a,b,c,8,1.7976931348623157E308,-1.7976931348623157E308);A.write(a,b,c,d,52,8);return c+8}function v(a){for(var b=[],c=0;c<a.length;c++){var h=a.charCodeAt(c);if(127>=h)b.push(h);else{var d=c;55296<=h&&57343>=h&&c++;h=encodeURIComponent(a.slice(d,c+1)).substr(1).split("%");for(d=0;d<h.length;d++)b.push(parseInt(h[d],
16))}}return b}function m(a){for(var b=[],c=0;c<a.length;c++)b.push(a.charCodeAt(c)&255);return b}function w(a,b,c,d,e){e&&(d-=d%e);for(e=0;e<d&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}function t(a){try{return decodeURIComponent(a)}catch(r){return String.fromCharCode(65533)}}var C=g("base64-js"),A=g("ieee754"),y=g("is-array");k.Buffer=a;k.SlowBuffer=a;k.INSPECT_MAX_BYTES=50;a.poolSize=8192;var x=1073741823;a.TYPED_ARRAY_SUPPORT=function(){try{var a=new ArrayBuffer(0),b=new Uint8Array(a);
b.foo=function(){return 42};return 42===b.foo()&&"function"===typeof b.subarray&&0===(new Uint8Array(1)).subarray(1,1).byteLength}catch(z){return!1}}();a.isBuffer=function(a){return!(null==a||!a._isBuffer)};a.compare=function(b,c){if(!a.isBuffer(b)||!a.isBuffer(c))throw new TypeError("Arguments must be Buffers");for(var h=b.length,d=c.length,e=0,f=Math.min(h,d);e<f&&b[e]===c[e];e++);e!==f&&(h=b[e],d=c[e]);return h<d?-1:d<h?1:0};a.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;
default:return!1}};a.concat=function(b,c){if(!y(b))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===b.length)return new a(0);if(1===b.length)return b[0];var h;if(void 0===c)for(h=c=0;h<b.length;h++)c+=b[h].length;var d=new a(c),e=0;for(h=0;h<b.length;h++){var f=b[h];f.copy(d,e);e+=f.length}return d};a.byteLength=function(a,b){var c;a+="";switch(b||"utf8"){case "ascii":case "binary":case "raw":c=a.length;break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=2*a.length;break;
case "hex":c=a.length>>>1;break;case "utf8":case "utf-8":c=v(a).length;break;case "base64":c=C.toByteArray(a).length;break;default:c=a.length}return c};a.prototype.length=void 0;a.prototype.parent=void 0;a.prototype.toString=function(a,b,d){var h=!1;b>>>=0;d=void 0===d||Infinity===d?this.length:d>>>0;a||(a="utf8");0>b&&(b=0);d>this.length&&(d=this.length);if(d<=b)return"";for(;;)switch(a){case "hex":a=b;b=d;d=this.length;if(!a||0>a)a=0;if(!b||0>b||b>d)b=d;h="";for(d=a;d<b;d++)a=h,h=this[d],h=16>h?
"0"+h.toString(16):h.toString(16),h=a+h;return h;case "utf8":case "utf-8":h=a="";for(d=Math.min(this.length,d);b<d;b++)127>=this[b]?(a+=t(h)+String.fromCharCode(this[b]),h=""):h+="%"+this[b].toString(16);return a+t(h);case "ascii":return c(this,b,d);case "binary":return c(this,b,d);case "base64":return b=0===b&&d===this.length?C.fromByteArray(this):C.fromByteArray(this.slice(b,d)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(b,d);d="";for(a=0;a<b.length;a+=2)d+=String.fromCharCode(b[a]+
256*b[a+1]);return d;default:if(h)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase();h=!0}};a.prototype.equals=function(b){if(!a.isBuffer(b))throw new TypeError("Argument must be a Buffer");return 0===a.compare(this,b)};a.prototype.inspect=function(){var a="",b=k.INSPECT_MAX_BYTES;0<this.length&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... "));return"<Buffer "+a+">"};a.prototype.compare=function(b){if(!a.isBuffer(b))throw new TypeError("Argument must be a Buffer");
return a.compare(this,b)};a.prototype.get=function(a){console.log(".get() is deprecated. Access using array indexes instead.");return this.readUInt8(a)};a.prototype.set=function(a,b){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(a,b)};a.prototype.write=function(a,b,c,d){if(isFinite(b))isFinite(c)||(d=c,c=void 0);else{var h=d;d=b;b=c;c=h}b=Number(b)||0;h=this.length-b;c?(c=Number(c),c>h&&(c=h)):c=h;d=String(d||"utf8").toLowerCase();switch(d){case "hex":b=
Number(b)||0;d=this.length-b;c?(c=Number(c),c>d&&(c=d)):c=d;d=a.length;if(0!==d%2)throw Error("Invalid hex string");c>d/2&&(c=d/2);for(d=0;d<c;d++){h=parseInt(a.substr(2*d,2),16);if(isNaN(h))throw Error("Invalid hex string");this[b+d]=h}a=d;break;case "utf8":case "utf-8":a=w(v(a),this,b,c);break;case "ascii":a=w(m(a),this,b,c);break;case "binary":a=w(m(a),this,b,c);break;case "base64":a=w(C.toByteArray(a),this,b,c);break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":for(var e,h=[],f=0;f<
a.length;f++)e=a.charCodeAt(f),d=e>>8,e%=256,h.push(e),h.push(d);a=w(h,this,b,c,2);break;default:throw new TypeError("Unknown encoding: "+d);}return a};a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};a.prototype.slice=function(b,c){var h=this.length;b=~~b;c=void 0===c?h:~~c;0>b?(b+=h,0>b&&(b=0)):b>h&&(b=h);0>c?(c+=h,0>c&&(c=0)):c>h&&(c=h);c<b&&(c=b);if(a.TYPED_ARRAY_SUPPORT)return a._augment(this.subarray(b,c));for(var h=c-b,d=new a(h,void 0,
!0),e=0;e<h;e++)d[e]=this[e+b];return d};a.prototype.readUInt8=function(a,b){b||d(a,1,this.length);return this[a]};a.prototype.readUInt16LE=function(a,b){b||d(a,2,this.length);return this[a]|this[a+1]<<8};a.prototype.readUInt16BE=function(a,b){b||d(a,2,this.length);return this[a]<<8|this[a+1]};a.prototype.readUInt32LE=function(a,b){b||d(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};a.prototype.readUInt32BE=function(a,b){b||d(a,4,this.length);return 16777216*this[a]+
(this[a+1]<<16|this[a+2]<<8|this[a+3])};a.prototype.readInt8=function(a,b){b||d(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};a.prototype.readInt16LE=function(a,b){b||d(a,2,this.length);var c=this[a]|this[a+1]<<8;return c&32768?c|4294901760:c};a.prototype.readInt16BE=function(a,b){b||d(a,2,this.length);var c=this[a+1]|this[a]<<8;return c&32768?c|4294901760:c};a.prototype.readInt32LE=function(a,b){b||d(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};a.prototype.readInt32BE=
function(a,b){b||d(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};a.prototype.readFloatLE=function(a,b){b||d(a,4,this.length);return A.read(this,a,!0,23,4)};a.prototype.readFloatBE=function(a,b){b||d(a,4,this.length);return A.read(this,a,!1,23,4)};a.prototype.readDoubleLE=function(a,b){b||d(a,8,this.length);return A.read(this,a,!0,52,8)};a.prototype.readDoubleBE=function(a,b){b||d(a,8,this.length);return A.read(this,a,!1,52,8)};a.prototype.writeUInt8=function(c,d,e){c=+c;
d>>>=0;e||b(this,c,d,1,255,0);a.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));this[d]=c;return d+1};a.prototype.writeUInt16LE=function(c,d,f){c=+c;d>>>=0;f||b(this,c,d,2,65535,0);a.TYPED_ARRAY_SUPPORT?(this[d]=c,this[d+1]=c>>>8):e(this,c,d,!0);return d+2};a.prototype.writeUInt16BE=function(c,d,f){c=+c;d>>>=0;f||b(this,c,d,2,65535,0);a.TYPED_ARRAY_SUPPORT?(this[d]=c>>>8,this[d+1]=c):e(this,c,d,!1);return d+2};a.prototype.writeUInt32LE=function(c,d,e){c=+c;d>>>=0;e||b(this,c,d,4,4294967295,0);a.TYPED_ARRAY_SUPPORT?
(this[d+3]=c>>>24,this[d+2]=c>>>16,this[d+1]=c>>>8,this[d]=c):l(this,c,d,!0);return d+4};a.prototype.writeUInt32BE=function(c,d,e){c=+c;d>>>=0;e||b(this,c,d,4,4294967295,0);a.TYPED_ARRAY_SUPPORT?(this[d]=c>>>24,this[d+1]=c>>>16,this[d+2]=c>>>8,this[d+3]=c):l(this,c,d,!1);return d+4};a.prototype.writeInt8=function(c,d,e){c=+c;d>>>=0;e||b(this,c,d,1,127,-128);a.TYPED_ARRAY_SUPPORT||(c=Math.floor(c));0>c&&(c=255+c+1);this[d]=c;return d+1};a.prototype.writeInt16LE=function(c,d,f){c=+c;d>>>=0;f||b(this,
c,d,2,32767,-32768);a.TYPED_ARRAY_SUPPORT?(this[d]=c,this[d+1]=c>>>8):e(this,c,d,!0);return d+2};a.prototype.writeInt16BE=function(c,d,f){c=+c;d>>>=0;f||b(this,c,d,2,32767,-32768);a.TYPED_ARRAY_SUPPORT?(this[d]=c>>>8,this[d+1]=c):e(this,c,d,!1);return d+2};a.prototype.writeInt32LE=function(c,d,e){c=+c;d>>>=0;e||b(this,c,d,4,2147483647,-2147483648);a.TYPED_ARRAY_SUPPORT?(this[d]=c,this[d+1]=c>>>8,this[d+2]=c>>>16,this[d+3]=c>>>24):l(this,c,d,!0);return d+4};a.prototype.writeInt32BE=function(c,d,e){c=
+c;d>>>=0;e||b(this,c,d,4,2147483647,-2147483648);0>c&&(c=4294967295+c+1);a.TYPED_ARRAY_SUPPORT?(this[d]=c>>>24,this[d+1]=c>>>16,this[d+2]=c>>>8,this[d+3]=c):l(this,c,d,!1);return d+4};a.prototype.writeFloatLE=function(a,b,c){return f(this,a,b,!0,c)};a.prototype.writeFloatBE=function(a,b,c){return f(this,a,b,!1,c)};a.prototype.writeDoubleLE=function(a,b,c){return p(this,a,b,!0,c)};a.prototype.writeDoubleBE=function(a,b,c){return p(this,a,b,!1,c)};a.prototype.copy=function(b,c,d,e){d||(d=0);e||0===
e||(e=this.length);c||(c=0);if(e!==d&&0!==b.length&&0!==this.length){if(e<d)throw new TypeError("sourceEnd < sourceStart");if(0>c||c>=b.length)throw new TypeError("targetStart out of bounds");if(0>d||d>=this.length)throw new TypeError("sourceStart out of bounds");if(0>e||e>this.length)throw new TypeError("sourceEnd out of bounds");e>this.length&&(e=this.length);b.length-c<e-d&&(e=b.length-c+d);e-=d;if(1E3>e||!a.TYPED_ARRAY_SUPPORT)for(var f=0;f<e;f++)b[f+c]=this[f+d];else b._set(this.subarray(d,d+
e),c)}};a.prototype.fill=function(a,b,c){a||(a=0);b||(b=0);c||(c=this.length);if(c<b)throw new TypeError("end < start");if(c!==b&&0!==this.length){if(0>b||b>=this.length)throw new TypeError("start out of bounds");if(0>c||c>this.length)throw new TypeError("end out of bounds");if("number"===typeof a)for(;b<c;b++)this[b]=a;else{a=v(a.toString());for(var d=a.length;b<c;b++)this[b]=a[b%d]}return this}};a.prototype.toArrayBuffer=function(){if("undefined"!==typeof Uint8Array){if(a.TYPED_ARRAY_SUPPORT)return(new a(this)).buffer;
for(var b=new Uint8Array(this.length),c=0,d=b.length;c<d;c+=1)b[c]=this[c];return b.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser");};var u=a.prototype;a._augment=function(b){b.constructor=a;b._isBuffer=!0;b._get=b.get;b._set=b.set;b.get=u.get;b.set=u.set;b.write=u.write;b.toString=u.toString;b.toLocaleString=u.toString;b.toJSON=u.toJSON;b.equals=u.equals;b.compare=u.compare;b.copy=u.copy;b.slice=u.slice;b.readUInt8=u.readUInt8;b.readUInt16LE=u.readUInt16LE;b.readUInt16BE=
u.readUInt16BE;b.readUInt32LE=u.readUInt32LE;b.readUInt32BE=u.readUInt32BE;b.readInt8=u.readInt8;b.readInt16LE=u.readInt16LE;b.readInt16BE=u.readInt16BE;b.readInt32LE=u.readInt32LE;b.readInt32BE=u.readInt32BE;b.readFloatLE=u.readFloatLE;b.readFloatBE=u.readFloatBE;b.readDoubleLE=u.readDoubleLE;b.readDoubleBE=u.readDoubleBE;b.writeUInt8=u.writeUInt8;b.writeUInt16LE=u.writeUInt16LE;b.writeUInt16BE=u.writeUInt16BE;b.writeUInt32LE=u.writeUInt32LE;b.writeUInt32BE=u.writeUInt32BE;b.writeInt8=u.writeInt8;
b.writeInt16LE=u.writeInt16LE;b.writeInt16BE=u.writeInt16BE;b.writeInt32LE=u.writeInt32LE;b.writeInt32BE=u.writeInt32BE;b.writeFloatLE=u.writeFloatLE;b.writeFloatBE=u.writeFloatBE;b.writeDoubleLE=u.writeDoubleLE;b.writeDoubleBE=u.writeDoubleBE;b.fill=u.fill;b.inspect=u.inspect;b.toArrayBuffer=u.toArrayBuffer;return b};var B=/[^+\/0-9A-z]/g},{"base64-js":22,ieee754:25,"is-array":26}],24:[function(g,n,k){function a(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function c(a){return"function"===
typeof a}function d(a){return"object"===typeof a&&null!==a}n.exports=a;a.EventEmitter=a;a.prototype._events=void 0;a.prototype._maxListeners=void 0;a.defaultMaxListeners=10;a.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};a.prototype.emit=function(a){var b,l,g,f;this._events||(this._events={});if("error"===a&&(!this._events.error||d(this._events.error)&&!this._events.error.length)){b=arguments[1];
if(b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.');}l=this._events[a];if(void 0===l)return!1;if(c(l))switch(arguments.length){case 1:l.call(this);break;case 2:l.call(this,arguments[1]);break;case 3:l.call(this,arguments[1],arguments[2]);break;default:b=arguments.length;g=Array(b-1);for(f=1;f<b;f++)g[f-1]=arguments[f];l.apply(this,g)}else if(d(l)){b=arguments.length;g=Array(b-1);for(f=1;f<b;f++)g[f-1]=arguments[f];l=l.slice();b=l.length;for(f=0;f<b;f++)l[f].apply(this,
g)}return!0};a.prototype.addListener=function(b,e){var l;if(!c(e))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",b,c(e.listener)?e.listener:e);this._events[b]?d(this._events[b])?this._events[b].push(e):this._events[b]=[this._events[b],e]:this._events[b]=e;d(this._events[b])&&!this._events[b].warned&&(l=void 0!==this._maxListeners?this._maxListeners:a.defaultMaxListeners)&&0<l&&this._events[b].length>l&&(this._events[b].warned=
!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[b].length),"function"===typeof console.trace&&console.trace());return this};a.prototype.on=a.prototype.addListener;a.prototype.once=function(a,d){function b(){this.removeListener(a,b);e||(e=!0,d.apply(this,arguments))}if(!c(d))throw TypeError("listener must be a function");var e=!1;b.listener=d;this.on(a,b);return this};a.prototype.removeListener=
function(a,e){var b,g,f;if(!c(e))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;b=this._events[a];f=b.length;g=-1;if(b===e||c(b.listener)&&b.listener===e)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,e);else if(d(b)){for(;0<f--;)if(b[f]===e||b[f].listener&&b[f].listener===e){g=f;break}if(0>g)return this;1===b.length?(b.length=0,delete this._events[a]):b.splice(g,1);this._events.removeListener&&this.emit("removeListener",
a,e)}return this};a.prototype.removeAllListeners=function(a){var b;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);this.removeAllListeners("removeListener");this._events={};return this}b=this._events[a];if(c(b))this.removeListener(a,b);else for(;b.length;)this.removeListener(a,b[b.length-1]);delete this._events[a];
return this};a.prototype.listeners=function(a){return this._events&&this._events[a]?c(this._events[a])?[this._events[a]]:this._events[a].slice():[]};a.listenerCount=function(a,d){return a._events&&a._events[d]?c(a._events[d])?1:a._events[d].length:0}},{}],25:[function(g,n,k){k.read=function(a,c,d,b,e){var g;g=8*e-b-1;var k=(1<<g)-1,f=k>>1,p=-7;e=d?e-1:0;var v=d?-1:1,m=a[c+e];e+=v;d=m&(1<<-p)-1;m>>=-p;for(p+=g;0<p;d=256*d+a[c+e],e+=v,p-=8);g=d&(1<<-p)-1;d>>=-p;for(p+=b;0<p;g=256*g+a[c+e],e+=v,p-=8);
if(0===d)d=1-f;else{if(d===k)return g?NaN:Infinity*(m?-1:1);g+=Math.pow(2,b);d-=f}return(m?-1:1)*g*Math.pow(2,d-b)};k.write=function(a,c,d,b,e,g){var l,f=8*g-e-1,p=(1<<f)-1,k=p>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;g=b?0:g-1;var w=b?1:-1,t=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,b=p):(b=Math.floor(Math.log(c)/Math.LN2),1>c*(l=Math.pow(2,-b))&&(b--,l*=2),c=1<=b+k?c+m/l:c+m*Math.pow(2,1-k),2<=c*l&&(b++,l/=2),b+k>=p?(c=0,b=p):1<=b+k?(c=(c*l-1)*Math.pow(2,e),
b+=k):(c=c*Math.pow(2,k-1)*Math.pow(2,e),b=0));for(;8<=e;a[d+g]=c&255,g+=w,c/=256,e-=8);b=b<<e|c;for(f+=e;0<f;a[d+g]=b&255,g+=w,b/=256,f-=8);a[d+g-w]|=128*t}},{}],26:[function(g,n,k){var a=Object.prototype.toString;n.exports=Array.isArray||function(c){return!!c&&"[object Array]"==a.call(c)}},{}],27:[function(g,n,k){n.exports.RTCIceCandidate=g("./rtcicecandidate");n.exports.RTCPeerConnection=g("./rtcpeerconnection");n.exports.RTCSessionDescription=g("./rtcsessiondescription")},{"./rtcicecandidate":30,
"./rtcpeerconnection":31,"./rtcsessiondescription":33}],28:[function(g,n,k){function a(c,d,b,e,g,k,f,p,v,m){if(!(this instanceof a))return new a(c,d,b,e,g,k,f,p,v,m);var l=!1;c=c||"0.0.0.0";f="number"===typeof f?f:9;p="boolean"===typeof p?p:!0;v=v||null;m=m||null;Object.defineProperties(this,{_address:{get:function(){return c},set:function(a){c=a}},_candidates:{value:[]},_port:{get:function(){return f},set:function(a){f=a}},_rejected:{get:function(){return l},set:function(a){l=a}},_streamId:{get:function(){return v},
set:function(a){v=a}},_track:{get:function(){return m},set:function(a){m=a}},_triples:{value:new Set},candidates:{enumerable:!0,get:function(){return this._candidates.slice()}},capabilities:{enumerable:!0,value:b},defaultCandidate:{enumerable:!0,get:function(){return this._candidates.length?this._candidates[0]:null}},direction:{enumerable:!0,value:e},kind:{enumerable:!0,value:g},port:{enumerable:!0,get:function(){return f}},rtcpMux:{enumerable:!0,value:p},streamId:{enumerable:!0,get:function(){return v}},
track:{enumerable:!0,get:function(){return m}}});d&&d.forEach(this.addCandidate,this)}a.prototype.addCandidate=function(a){var c=[a.ip,a.port,a.protocol].join(" ");return this._triples.has(c)?!1:(this._triples.add(c),this._candidates.push(a),!0)};a.prototype.copy=function(c,d,b,e,g,k,f){return new a(this.address,d,b||this.capabilities,e||this.direction,this.kind,this.mid,g,this.rtcpMux,k,f)};a.prototype.copyAndReject=function(){return(new a(null,this.candidates,this.capabilities,this.direction,this.kind,
this.mid,null,this.rtcpMux)).reject()};a.prototype.reject=function(){this.setPort(0);return this};a.prototype.setAddress=function(a){this._address=a;return this};a.prototype.setPort=function(a){this._port=a;return this};n.exports=a},{}],29:[function(g,n,k){function a(c,d){if(!(this instanceof a))return new a(c,d);Event.call(this,c,d);Object.defineProperties(this,{stream:{enumerable:!0,value:d.stream}})}n.exports=a},{}],30:[function(g,n,k){function a(c){if(!(this instanceof a))return new a(c);Object.defineProperties(this,
{candidate:{enumerable:!0,value:c.candidate},sdpMLineIndex:{enumerable:!0,value:c.sdpMLineIndex}})}n.exports=a},{}],31:[function(g,n,k){function a(b){if(!(this instanceof a))return new a(b);b={gatherPolicy:b.gatherPolicy||"all",iceServers:[]};var c=new RTCIceGatherer(b),d=!1;c.onlocalcandidate=this._onlocalcandidate.bind(this);var e=null,f=!1,m=0,g=new RTCIceTransport,l=null;g.onicestatechange=this._onicestatechange.bind(this);var k=new RTCDtlsTransport(g);k.ondtlsstatechange=this._ondtlsstatechange.bind(this);
var h="stable",p=null,q=null,v=null,n=null;Object.defineProperties(this,{_dtlsTransport:{value:k},_dtmfSenders:{value:new Map},_gatherOptions:{value:b},_iceCandidatesAdded:{get:function(){return m},set:function(a){m=a}},_iceGatherer:{value:c},_iceGatheringCompleted:{get:function(){return d},set:function(a){d=a}},_iceTransport:{value:g},_localCandidates:{value:new Set},_localDescription:{get:function(){return q},set:function(a){q=a}},_localStreams:{value:[]},_midCounters:{value:{audio:0,video:0}},
_remoteCandidates:{value:new Set},_remoteDescription:{get:function(){return v},set:function(a){v=a}},_remoteStreams:{value:[]},_rtpReceivers:{value:new Map},_rtpSenders:{value:new Map},_signalingState:{get:function(){return h},set:function(a){h=a;if(this.onsignalingstatechange)this.onsignalingstatechange()}},_streamIds:{value:new Map},iceConnectionState:{enumerable:!0,get:function(){return g.state}},iceGatheringState:{enumerable:!0,get:function(){return d?"gathering":"complete"}},localDescription:{enumerable:!0,
get:function(){return q}},onaddstream:{enumerable:!0,get:function(){return n},set:function(a){n=a}},onicecandidate:{enumerable:!0,get:function(){return e},set:function(a){e=a;if(!f)try{c.getLocalCandidates().forEach(c.onlocalcandidate)}catch(E){}f=!0}},oniceconnectionstatechange:{enumerable:!0,get:function(){return l},set:function(a){l=a}},onsignalingstatechange:{enumerable:!0,get:function(){return p},set:function(a){p=a}},remoteDescription:{enumerable:!0,get:function(){return v}},signalingState:{enumerable:!0,
get:function(){return h}}})}function c(a){return Error("Invalid signaling state: "+a)}function d(a,b){var c=[];a.forEach(function(a){b.forEach(function(b){a.name===b.name&&a.clockRate===b.clockRate&&a.numChannels===b.numChannels&&c.push(b)})});return c}var b=g("./mediasection"),e=g("./mediastreamevent"),l=g("./rtcicecandidate"),q=g("./rtcpeerconnectioniceevent"),f=g("./rtcsessiondescription"),p=g("sdp-transform"),v=g("./sdp-utils");a.prototype._makeMid=function(a){return a+ ++this._midCounters[a]};
a.prototype._ondtlsstatechange=function(a){void 0};a.prototype._onicestatechange=function(a){if(this.oniceconnectionstatechange)this.oniceconnectionstatechange(a)};a.prototype._onlocalcandidate=function(a){Object.keys(a.candidate).length||(this._iceGatheringCompleted=!0);this._localCandidates.add(a.candidate);if(this.onicecandidate){a=a.candidate;if(Object.keys(a).length){var b=["a=candidate",a.foundation,1,a.protocol,a.priority,a.ip,a.port,a.type];a.relatedAddress&&(b=b.concat(["raddr",a.relatedAddress,
"rport",a.relatedPort]));b.push("generation 0");a=new l({candidate:b.join(" "),sdpMLineIndex:0})}else a=null;this.onicecandidate(new q("icecandidate",{candidate:a}))}};a.prototype._sendRtp=function(a){var b=a.kind;this._rtpSenders.forEach(function(c){c.track.kind===b&&c.send(a.capabilities)},this);return this};a.prototype._sendAndReceiveRtp=function(a){a.forEach(function(a){"sendrecv"!==a.direction&&"sendonly"!==a.direction||this._sendRtp(a);"sendrecv"!==a.direction&&"recvonly"!==a.direction||this._receiveRtp(a)},
this);return this};a.prototype._receiveRtp=function(a){var b=new RTCRtpReceiver(this._dtlsTransport,a.capabilities.type);b.receive(a.capabilities);a=b.track;this._rtpReceivers.set(a,b);b=new MediaStream;b.addTrack(a);this._remoteStreams.push(b);if(this.onaddstream)this.onaddstream(new e("addstream",{stream:b}));return this};a.prototype._startDtlsTransport=function(a){this._dtlsTransport.start(a);return this};a.prototype._startIceTransport=function(a){this._iceTransport.start(this._iceGatherer,a,"have-local-offer"===
this.signalingState?"controlling":"controlled");return this};a.prototype.addIceCandidate=function(a,b,c){void 0;this._iceCandidatesAdded++;a?(c=a.candidate.indexOf("candidate:"),a=a.candidate.slice(c+10).replace(/ +/g," ").split(" "),c={foundation:a[0],protocol:a[2],priority:parseInt(a[3]),ip:a[4],port:parseInt(a[5]),type:a[7],relatedAddress:null,relatedPort:0,tcpType:"active"},"host"!==c.type&&(c.relatedAddress=a[9],c.relatedPort=parseInt(a[11])),a=c):a={};c=[a.ip,a.port,a.transport].join(" ");this._remoteCandidates.has(c)||
(this._remoteCandidates.add(c),this._iceTransport.addRemoteCandidate(a));b&&b()};a.prototype.addStream=function(a){this._localStreams.push(a);a.getTracks().forEach(function(b){var c=new RTCRtpSender(b,this._dtlsTransport);this._rtpSenders.set(b,c);this._streamIds.set(b,a.id)},this)};a.prototype.close=function(){this._signalingState="closed";this._rtpReceivers.forEach(function(a){a.stop()});this._dtlsTransport.stop();this._iceTransport.stop()};a.prototype.createAnswer=function(a,b){if("have-remote-offer"!==
this.signalingState)return void b(c(this.signalingState));var e=v.parseDescription(this.remoteDescription),g={audio:[],video:[]};this.getLocalStreams().forEach(function(a){g.audio=g.audio.concat(a.getAudioTracks());g.video=g.video.concat(a.getVideoTracks())});e=e.mediaSections.map(function(a){var b=a.kind,c=a.direction,e=a.capabilities,f=RTCRtpSender.getCapabilities(b),f=d(e.codecs,f.codecs),e={codecs:f},m;if(!f.length)return a.copyAndReject();"inactive"===c||"recvonly"===c&&!g[b].length?b="inactive":
"recvonly"===c?(m=g[b].shift(),b="sendonly"):b="sendrecv"===c?(m=g[b].shift())?"sendrecv":"recvonly":"recvonly";c=this._streamIds.get(m);return a.copy(null,null,e,b,null,c,m)},this);e.forEach(function(a){this._localCandidates.forEach(a.addCandidate,a)},this);var m=v.makeInitialSDPBlob();v.addMediaSectionsToSDPBlob(m,e);v.addIceParametersToSDPBlob(m,this._iceGatherer.getLocalParameters());v.addDtlsParametersToSDPBlob(m,this._dtlsTransport.getLocalParameters());e=new f({sdp:p.write(m),type:"answer"});
a(e)};a.prototype.createDTMFSender=function(a){if(!this._dtmfSenders.has(a)){var b=this._rtpSenders.get(a),b=new RTCDtmfSender(b);this._dtmfSenders.set(a,b)}return this._dtmfSenders.get(a)};a.prototype.createOffer=function(a,c,d){var e={audio:null,video:null},g={audio:0,video:0};d=d||{};["optional","mandatory"].forEach(function(a){a in d&&("OfferToReceiveAudio"in d[a]&&(e.audio=Number(d[a].OfferToReceiveAudio)),"OfferToReceiveVideo"in d[a]&&(e.video=Number(d[a].OfferToReceiveVideo)))});var m=[],l=
{audio:e.audio,video:e.video};this.getLocalStreams().forEach(function(a){var c=a.getAudioTracks(),d=a.getVideoTracks();g.audio+=c.length;g.video+=d.length;c.concat(d).forEach(function(c){var d=c.kind,e=RTCRtpSender.getCapabilities(d),f,h=this._makeMid(d);null===l.audio?f="sendrecv":l[d]?(l[d]--,f="sendrecv"):f="sendonly";c=new b(null,null,e,f,d,h,null,null,a.id,c);m.push(c)},this)},this);["audio","video"].forEach(function(a){var c=Math.max(e[a]-g[a],0);if(c)for(var d=RTCRtpSender.getCapabilities(a),
f;c--;)f=this._makeMid(a),f=new b(null,null,d,"recvonly",a,f),m.push(f)},this);m.forEach(function(a){this._localCandidates.forEach(a.addCandidate,a)},this);c=v.makeInitialSDPBlob();v.addMediaSectionsToSDPBlob(c,m);v.addIceParametersToSDPBlob(c,this._iceGatherer.getLocalParameters());v.addDtlsParametersToSDPBlob(c,this._dtlsTransport.getLocalParameters());c=new f({sdp:p.write(c),type:"offer"});a(c)};a.prototype.getLocalStreams=function(){return this._localStreams.slice()};a.prototype.getRemoteStreams=
function(){return this._remoteStreams.slice()};a.prototype.setLocalDescription=function(a,b,d){switch(this.signalingState){case "stable":d="have-local-offer";break;case "have-remote-offer":d="stable";break;default:return void d(c(this.signalingState))}var e=v.parseDescription(a);if("have-remote-offer"===this.signalingState){e.mediaSections.forEach(this._sendRtp,this);var f=v.parseDescription(this.remoteDescription).mediaSections[0].capabilities.encodings[0].ssrc;e.mediaSections.forEach(function(a){a.capabilities.encodings.forEach(function(a){a.ssrc=
f});a.capabilities.rtcp.ssrc=f});e.mediaSections.forEach(this._receiveRtp,this)}this._localDescription=a;this._signalingState=d;b()};a.prototype.setRemoteDescription=function(a,b,d){switch(this.signalingState){case "stable":d="have-remote-offer";break;case "have-local-offer":d="stable";break;default:return void d(c(this.signalingState))}var e=v.parseDescription(a);e.mediaSections.forEach(function(a){a.candidates.forEach(this._iceTransport.addRemoteCandidate,this._iceTransport)},this);this._startIceTransport(e.iceParameters[0]);
this._startDtlsTransport(e.dtlsParameters[0]);"have-local-offer"===this.signalingState&&(e.mediaSections.forEach(this._receiveRtp,this),e.mediaSections.forEach(this._sendRtp,this));this._remoteDescription=a;this._signalingState=d;b()};n.exports=a},{"./mediasection":28,"./mediastreamevent":29,"./rtcicecandidate":30,"./rtcpeerconnectioniceevent":32,"./rtcsessiondescription":33,"./sdp-utils":34,"sdp-transform":37}],32:[function(g,n,k){function a(c,d){if(!(this instanceof a))return new a(c,d);Event.call(this,
c,d);Object.defineProperties(this,{candidate:{enumerable:!0,value:d.candidate}})}n.exports=a},{}],33:[function(g,n,k){function a(c){if(!(this instanceof a))return new a(c);Object.defineProperties(this,{sdp:{enumerable:!0,value:c.sdp},type:{enumerable:!0,value:c.type}})}n.exports=a},{}],34:[function(g,n,k){function a(a,b,c){a=a||{};a.candidates=a.candidates||[];if(!b)return a;b.forEach(function(b){if(b.foundation){var d={foundation:b.foundation,transport:b.protocol,priority:b.priority,ip:b.ip,port:b.port,
type:b.type,generation:0};b.relatedAddress&&(d.raddr=b.relatedAddress,d.rport=b.relatedPort);if("number"===typeof c)d.component=c,a.candidates.push(d);else{d.component=1;a.candidates.push(d);b={};for(var e in d)b[e]=d[e];b.component=2;a.candidates.push(b)}}else a.endOfCandidates="end-of-candidates"});return a}function c(b,c,d){b=b||{};if(!b.media)return b;b.media.forEach(function(b){a(b,c,d)});return b}function d(a,b){a=a||{};if(!a.media)return a;a.media.forEach(function(a){a=a||{};var c=b.fingerprints;
c.length&&(a.fingerprint={type:c[0].algorithm,hash:c[0].value})});return a}function b(a,b){a=a||{};if(!a.media)return a;a.media.forEach(function(a){a=a||{};a.iceUfrag=b.usernameFragment;a.icePwd=b.password});return a}function e(b,c){var d=c.streamId;d&&(b.msidSemantic=b.msidSemantic||{semantic:"WMS",token:[]},b.msidSemantic.token.push(d));var e=c.mid;if(e){b.groups=b.groups||[];var f=!1;b.groups.forEach(function(a){"BUNDLE"===a.type&&(a.mids.push(e),f=!0)});f||b.groups.push({type:"BUNDLE",mids:[e]})}var g=
[],k=[],q=[];c.capabilities.codecs.forEach(function(a){var b=a.preferredPayloadType;g.push(b);var c={payload:b,codec:a.name,rate:a.clockRate};1<a.numChannels&&(c.encoding=a.numChannels);k.push(c);switch(a.name){case "telephone-event":a.parameters&&a.parameters.events&&q.push({payload:b,config:a.parameters.events})}});var p=[];if(d&&c.track)var d=Math.floor(4294967296*Math.random()),n=l(),v=c.track.id,p=p.concat([{id:d,attribute:"cname",value:n},{id:d,attribute:"msid",value:c.streamId+" "+v},{id:d,
attribute:"mslabel",value:v},{id:d,attribute:"label",value:v}]);d=c.defaultCandidate;p={rtp:k,fmtp:q,type:c.kind,port:d?d.port:9,payloads:g.join(" "),protocol:"RTP/SAVPF",direction:c.direction,connection:{version:4,ip:d?d.ip:"0.0.0.0"},rtcp:{port:d?d.port:9,netType:"IN",ipVer:4,address:d?d.ip:"0.0.0.0"},ssrcs:p};e&&(p.mid=e);c.rtcpMux&&(p.rtcpMux="rtcp-mux");a(p,c.candidates);b.media.push(p);return b}function l(){for(var a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/".split(""),
b=16,c="";b--;)c+=a[Math.floor(Math.random()*a.length)];return c}var q=g("./mediasection"),f=g("sdp-transform");n.exports.addCandidatesToSDPBlob=function(a,b,d){a=a||{};c(a,b,d);return a};n.exports.addDtlsParametersToSDPBlob=function(a,b){a=a||{};d(a,b);return a};n.exports.addIceParametersToSDPBlob=function(a,c){a=a||{};b(a,c);return a};n.exports.addMediaSectionsToSDPBlob=function(a,b){b.forEach(e.bind(null,a));return a};n.exports.makeInitialSDPBlob=function(a){a=a||Math.floor(4294967296*Math.random());
return{version:0,origin:{username:"-",sessionId:a,sessionVersion:0,netType:"IN",ipVer:4,address:"127.0.0.1"},name:"-",timing:{start:0,stop:0},connection:{version:4,ip:"0.0.0.0"},media:[]}};n.exports.parseDescription=function(a){a=f.parse(a.sdp);var b=[],c=[],d=[],e=[],g=[a];a.media&&(g=g.concat(a.media));g.forEach(function(a){a.iceUfrag&&a.icePwd&&a.fingerprint&&(b.push({usernameFragment:a.iceUfrag,password:a.icePwd}),c.push({fingerprints:[{algorithm:a.fingerprint.type,value:a.fingerprint.hash}]}));
if(a.rtp&&"video"!==a.type){var f=a.connection?a.connection.ip:null,g=a.direction,l=a.type,m=a.mid,h=a.port||null,k="rtcp-mux"===a.rtcpMux,n,p,v;(a.ssrcs||[]).forEach(function(a){switch(a.attribute){case "cname":p=a.id;n=a.value;break;case "label":case "mslabel":p=a.id;break;case "msid":p=a.id,v=a.value.split(" ")[0]}});var t={type:l,muxId:m,codecs:a.rtp.map(function(a){var b={name:a.codec,payloadType:parseInt(a.payload),clockRate:parseInt(a.rate),numChannels:a.encoding||1,rtcpFeedback:[],parameters:{}};
switch(a.codec){case "telephone-event":b.parameters.events="0-16"}return b}),headerExtensions:[],encodings:a.rtp.map(function(a){return{ssrc:p,codecPayloadType:parseInt(a.payload),active:!0}}),rtcp:{ssrc:p,cname:n,mux:k}},w=new q(f,d,t,g,l,m,h,k,v);(a.candidates||[]).forEach(function(a){a={foundation:String(a.foundation),protocol:a.transport,priority:a.priority,ip:a.ip,port:a.port,type:a.type,relatedAddress:a.raddr,relatedPort:a.rport};d.push(a);w.addCandidate(a)});void 0;"end-of-candidates"===a.endOfCandidates&&
w.addCandidate({});e.push(w)}});return{iceParameters:b,dtlsParameters:c,mediaSections:e}}},{"./mediasection":28,"sdp-transform":37}],35:[function(g,n,k){function a(){}g=n.exports={};g.nextTick=function(){if("undefined"!==typeof window&&window.setImmediate)return function(a){return window.setImmediate(a)};if("undefined"!==typeof window&&window.postMessage&&window.addEventListener){var a=[];window.addEventListener("message",function(c){var b=c.source;b!==window&&null!==b||"process-tick"!==c.data||(c.stopPropagation(),
0<a.length&&a.shift()())},!0);return function(c){a.push(c);window.postMessage("process-tick","*")}}return function(a){setTimeout(a,0)}}();g.title="browser";g.browser=!0;g.env={};g.argv=[];g.on=a;g.addListener=a;g.once=a;g.off=a;g.removeListener=a;g.removeAllListeners=a;g.emit=a;g.binding=function(a){throw Error("process.binding is not supported");};g.cwd=function(){return"/"};g.chdir=function(a){throw Error("process.chdir is not supported");}},{}],36:[function(g,n,k){var a=n.exports={v:[{name:"version",
reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:"username sessionId sessionVersion netType ipVer address".split(" "),format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",
reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(a){return a.encoding?"rtpmap:%d %s/%s/%s":a.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",
reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(a){return null!=a.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(a){return null!=a.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},
{push:"ext",reg:/^extmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["value","uri","config"],format:function(a){return null!=a.config?"extmap:%s %s %s":"extmap:%s %s"}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(a){return null!=a.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},
{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,
names:"foundation component transport priority ip port type raddr rport tcptype generation network-id network-cost".split(" "),format:function(a){var c;c="candidate:%s %d %s %d %s %d typ %s"+(null!=a.raddr?" raddr %s rport %d":"%v%v");c+=null!=a.tcptype?" tcptype %s":"%v";null!=a.generation&&(c+=" generation %d");c+=null!=a["network-id"]?" network-id %d":"%v";return c+=null!=a["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,
format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_]*)(?::(.*))?/,names:["id","attribute","value"],format:function(a){var c="ssrc:%d";null!=a.attribute&&(c+=" %s",null!=a.value&&(c+=":%s"));return c}},{push:"ssrcGroups",reg:/^ssrc-group:(\w*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},
{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(a){return null!=a.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{push:"invalid",names:["value"]}]};Object.keys(a).forEach(function(c){a[c].forEach(function(a){a.reg||(a.reg=/(.*)/);a.format||(a.format="%s")})})},{}],
37:[function(g,n,k){n=g("./parser");g=g("./writer");k.write=g;k.parse=n.parse;k.parseFmtpConfig=n.parseFmtpConfig;k.parsePayloads=n.parsePayloads;k.parseRemoteCandidates=n.parseRemoteCandidates},{"./parser":38,"./writer":39}],38:[function(g,n,k){var a=function(a){return String(Number(a))===a?Number(a):a},c=g("./grammar"),d=RegExp.prototype.test.bind(/^([a-z])=(.*)/);k.parse=function(b){var e={},g=[],f=e;b.split(/(\r\n|\r|\n)/).filter(d).forEach(function(b){var d=b[0],e=b.slice(2);"m"===d&&(g.push({rtp:[],
fmtp:[]}),f=g[g.length-1]);for(b=0;b<(c[d]||[]).length;b+=1){var l=c[d][b];if(l.reg.test(e)){d=l;b=f;l=e;e=d.name&&d.names;d.push&&!b[d.push]?b[d.push]=[]:e&&!b[d.name]&&(b[d.name]={});var e=d.push?{}:e?b[d.name]:b,l=l.match(d.reg),k=e,q=d.names,n=d.name;if(n&&!q)k[n]=a(l[1]);else for(n=0;n<q.length;n+=1)null!=l[n+1]&&(k[q[n]]=a(l[n+1]));d.push&&b[d.push].push(e);break}}});e.media=g;return e};var b=function(b,c){var d=c.split(/=(.+)/,2);2===d.length&&(b[d[0]]=a(d[1]));return b};k.parseFmtpConfig=
function(a){return a.split(/\;\s?/).reduce(b,{})};k.parsePayloads=function(a){return a.split(" ").map(Number)};k.parseRemoteCandidates=function(b){var c=[];b=b.split(" ").map(a);for(var d=0;d<b.length;d+=3)c.push({component:b[d],ip:b[d+1],port:b[d+2]});return c}},{"./grammar":36}],39:[function(g,n,k){var a=g("./grammar"),c=/%[sdv%]/g,d=function(a){var b=1,d=arguments,e=d.length;return a.replace(c,function(a){if(b>=e)return a;var c=d[b];b+=1;switch(a){case "%%":return"%";case "%s":return String(c);
case "%d":return Number(c);case "%v":return""}})},b=function(a,b,c){var e=b.format instanceof Function?b.format(b.push?c:c[b.name]):b.format;a=[a+"="+e];if(b.names)for(e=0;e<b.names.length;e+=1){var f=b.names[e];b.name?a.push(c[b.name][f]):a.push(c[b.names[e]])}else a.push(c[b.name]);return d.apply(null,a)},e="vosiuepcbtrza".split(""),l=["i","c","b","a"];n.exports=function(c,d){d=d||{};null==c.version&&(c.version=0);null==c.name&&(c.name=" ");c.media.forEach(function(a){null==a.payloads&&(a.payloads=
"")});var f=d.innerOrder||l,g=[];(d.outerOrder||e).forEach(function(d){a[d].forEach(function(a){a.name in c&&null!=c[a.name]?g.push(b(d,a,c)):a.push in c&&null!=c[a.push]&&c[a.push].forEach(function(c){g.push(b(d,a,c))})})});c.media.forEach(function(c){g.push(b("m",a.m[0],c));f.forEach(function(d){a[d].forEach(function(a){a.name in c&&null!=c[a.name]?g.push(b(d,a,c)):a.push in c&&null!=c[a.push]&&c[a.push].forEach(function(c){g.push(b(d,a,c))})})})});return g.join("\r\n")+"\r\n"}},{"./grammar":36}],
40:[function(g,n,k){(function(a,c){"object"===typeof k?n.exports=c():"function"===typeof define&&define.amd?define(c):a.printStackTrace=c()})(this,function(){function a(c){c=c||{guess:!0};var d=c.e||null,b=!!c.guess,e=c.mode||null;c=new a.implementation;d=c.run(d,e);return b?c.guessAnonymousFunctions(d):d}a.implementation=function(){};a.implementation.prototype={run:function(a,d){a=a||this.createException();d=d||this.mode(a);return"other"===d?this.other(arguments.callee):this[d](a)},createException:function(){try{this.undef()}catch(c){return c}},
mode:function(a){return"undefined"!==typeof window&&-1<window.navigator.userAgent.indexOf("PhantomJS")?"phantomjs":a.arguments&&a.stack?"chrome":a.stack&&a.sourceURL?"safari":a.stack&&a.number?"ie":a.stack&&a.fileName?"firefox":a.message&&a["opera#sourceloc"]?!a.stacktrace||-1<a.message.indexOf("\n")&&a.message.split("\n").length>a.stacktrace.split("\n").length?"opera9":"opera10a":a.message&&a.stack&&a.stacktrace?0>a.stacktrace.indexOf("called from line")?"opera10b":"opera11":a.stack&&!a.fileName?
"chrome":"other"},instrumentFunction:function(c,d,b){c=c||window;var e=c[d];c[d]=function(){b.call(this,a().slice(4));return c[d]._instrumented.apply(this,arguments)};c[d]._instrumented=e},deinstrumentFunction:function(a,d){a[d].constructor===Function&&a[d]._instrumented&&a[d]._instrumented.constructor===Function&&(a[d]=a[d]._instrumented)},chrome:function(a){return(a.stack+"\n").replace(/^[\s\S]+?\s+at\s+/," at ").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}() ($1)$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,
"{anonymous}() ($1)").replace(/^(.+) \((.+)\)$/gm,"$1@$2").split("\n").slice(0,-1)},safari:function(a){return a.stack.replace(/\[native code\]\n/m,"").replace(/^(?=\w+Error\:).*$\n/m,"").replace(/^@/gm,"{anonymous}()@").split("\n")},ie:function(a){return a.stack.replace(/^\s*at\s+(.*)$/gm,"$1").replace(/^Anonymous function\s+/gm,"{anonymous}() ").replace(/^(.+)\s+\((.+)\)$/gm,"$1@$2").split("\n").slice(1)},firefox:function(a){return a.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^(?:\((\S*)\))?@/gm,
"{anonymous}($1)@").split("\n")},opera11:function(a){var c=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/;a=a.stacktrace.split("\n");for(var b=[],e=0,g=a.length;e<g;e+=2){var k=c.exec(a[e]);if(k){var f=k[4]+":"+k[1]+":"+k[2],k=k[3]||"global code",k=k.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,"{anonymous}");b.push(k+"@"+f+" -- "+a[e+1].replace(/^\s+/,""))}}return b},opera10b:function(a){var c=/^(.*)@(.+):(\d+)$/;a=a.stacktrace.split("\n");for(var b=[],e=0,g=
a.length;e<g;e++){var k=c.exec(a[e]);k&&b.push((k[1]?k[1]+"()":"global code")+"@"+k[2]+":"+k[3])}return b},opera10a:function(a){var c=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i;a=a.stacktrace.split("\n");for(var b=[],e=0,g=a.length;e<g;e+=2){var k=c.exec(a[e]);k&&b.push((k[3]||"{anonymous}")+"()@"+k[2]+":"+k[1]+" -- "+a[e+1].replace(/^\s+/,""))}return b},opera9:function(a){var c=/Line (\d+).*script (?:in )?(\S+)/i;a=a.message.split("\n");for(var b=[],e=2,g=a.length;e<g;e+=2){var k=
c.exec(a[e]);k&&b.push("{anonymous}()@"+k[2]+":"+k[1]+" -- "+a[e+1].replace(/^\s+/,""))}return b},phantomjs:function(a){var c=/(\S+) \((\S+)\)/i;a=a.stack.split("\n");for(var b=[],e=1,g=a.length;e<g;e++){a[e]=a[e].replace(/^\s+at\s+/gm,"");var k=c.exec(a[e]);k?b.push(k[1]+"()@"+k[2]):b.push("{anonymous}()@"+a[e])}return b},other:function(a){for(var c=/function(?:\s+([\w$]+))?\s*\(/,b=[],e,g,k=Array.prototype.slice;a&&10>b.length;){e=c.test(a.toString())?RegExp.$1||"{anonymous}":"{anonymous}";try{g=
k.call(a.arguments||[])}catch(f){g=["Cannot access arguments: "+f]}b[b.length]=e+"("+this.stringifyArguments(g)+")";try{a=a.caller}catch(f){b[b.length]="Cannot access caller: "+f;break}}return b},stringifyArguments:function(a){for(var c=[],b=Array.prototype.slice,e=0;e<a.length;++e){var g=a[e];void 0===g?c[e]="undefined":null===g?c[e]="null":g.constructor&&(c[e]=g.constructor===Array?3>g.length?"["+this.stringifyArguments(g)+"]":"["+this.stringifyArguments(b.call(g,0,1))+"..."+this.stringifyArguments(b.call(g,
-1))+"]":g.constructor===Object?"#object":g.constructor===Function?"#function":g.constructor===String?'"'+g+'"':g.constructor===Number?g:"?")}return c.join(",")},sourceCache:{},ajax:function(a){var c=this.createXMLHTTPObject();if(c)try{return c.open("GET",a,!1),c.send(null),c.responseText}catch(b){}return""},createXMLHTTPObject:function(){for(var a,d=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},
function(){return new ActiveXObject("Microsoft.XMLHTTP")}],b=0;b<d.length;b++)try{return a=d[b](),this.createXMLHTTPObject=d[b],a}catch(e){}},isSameDomain:function(a){return"undefined"!==typeof location&&-1!==a.indexOf(location.hostname)},getSource:function(a){a in this.sourceCache||(this.sourceCache[a]=this.ajax(a).split("\n"));return this.sourceCache[a]},guessAnonymousFunctions:function(a){for(var c=0;c<a.length;++c){var b=/^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/,e=a[c],g=/\{anonymous\}\(.*\)@(.*)/.exec(e);
if(g){var k=b.exec(g[1]);k&&(b=k[1],g=k[2],k=k[3]||0,b&&this.isSameDomain(b)&&g&&(b=this.guessAnonymousFunction(b,g,k),a[c]=e.replace("{anonymous}",b)))}}return a},guessAnonymousFunction:function(a,d,b){var c;try{c=this.findFunctionName(this.getSource(a),d)}catch(l){c="getSource failed with url: "+a+", exception: "+l.toString()}return c},findFunctionName:function(a,d){for(var b=/function\s+([^(]*?)\s*\(([^)]*)\)/,c=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*function\b/,g=/['"]?([$_A-Za-z][$_A-Za-z0-9]*)['"]?\s*[:=]\s*(?:eval|new Function)\b/,
k="",f,n=Math.min(d,20),v,m=0;m<n;++m)if(f=a[d-m-1],v=f.indexOf("//"),0<=v&&(f=f.substr(0,v)),f)if(k=f+k,(f=c.exec(k))&&f[1]||(f=b.exec(k))&&f[1]||(f=g.exec(k))&&f[1])return f[1];return"(?)"}};return a})},{}],41:[function(g,n,k){n.exports="function"===typeof Object.create?function(a,c){a.super_=c;a.prototype=Object.create(c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,c){a.super_=c;var d=function(){};d.prototype=c.prototype;a.prototype=new d;a.prototype.constructor=
a}},{}],42:[function(g,n,k){n.exports=function(a){return a&&"object"===typeof a&&"function"===typeof a.copy&&"function"===typeof a.fill&&"function"===typeof a.readUInt8}},{}],43:[function(g,n,k){(function(a,c){function d(a,c){var d={seen:[],stylize:e};3<=arguments.length&&(d.depth=arguments[2]);4<=arguments.length&&(d.colors=arguments[3]);C(c)?d.showHidden=c:c&&k._extend(d,c);x(d.showHidden)&&(d.showHidden=!1);x(d.depth)&&(d.depth=2);x(d.colors)&&(d.colors=!1);x(d.customInspect)&&(d.customInspect=
!0);d.colors&&(d.stylize=b);return n(d,a,d.depth)}function b(a,b){var c=d.styles[b];return c?"\u001b["+d.colors[c][0]+"m"+a+"\u001b["+d.colors[c][1]+"m":a}function e(a,b){return a}function l(a){var b={};a.forEach(function(a,c){b[a]=!0});return b}function n(a,b,c){if(a.customInspect&&b&&z(b.inspect)&&b.inspect!==k.inspect&&(!b.constructor||b.constructor.prototype!==b)){var d=b.inspect(c,a);y(d)||(d=n(a,d,c));return d}if(d=f(a,b))return d;var e=Object.keys(b),g=l(e);a.showHidden&&(e=Object.getOwnPropertyNames(b));
if(r(b)&&(0<=e.indexOf("message")||0<=e.indexOf("description")))return p(b);if(0===e.length){if(z(b))return a.stylize("[Function"+(b.name?": "+b.name:"")+"]","special");if(u(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(h(b))return a.stylize(Date.prototype.toString.call(b),"date");if(r(b))return p(b)}var d="",G=!1,q=["{","}"];t(b)&&(G=!0,q=["[","]"]);z(b)&&(d=" [Function"+(b.name?": "+b.name:"")+"]");u(b)&&(d=" "+RegExp.prototype.toString.call(b));h(b)&&(d=" "+Date.prototype.toUTCString.call(b));
r(b)&&(d=" "+p(b));if(0===e.length&&(!G||0==b.length))return q[0]+d+q[1];if(0>c)return u(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);e=G?v(a,b,c,g,e):e.map(function(d){return m(a,b,c,g,d,G)});a.seen.pop();return w(e,d,q)}function f(a,b){if(x(b))return a.stylize("undefined","undefined");if(y(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}if(A(b))return a.stylize(""+
b,"number");if(C(b))return a.stylize(""+b,"boolean");if(null===b)return a.stylize("null","null")}function p(a){return"["+Error.prototype.toString.call(a)+"]"}function v(a,b,c,d,e){for(var f=[],g=0,h=b.length;g<h;++g)Object.prototype.hasOwnProperty.call(b,String(g))?f.push(m(a,b,c,d,String(g),!0)):f.push("");e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))});return f}function m(a,b,c,d,e,f){var g,h;b=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]};b.get?h=b.set?a.stylize("[Getter/Setter]",
"special"):a.stylize("[Getter]","special"):b.set&&(h=a.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(d,e)||(g="["+e+"]");h||(0>a.seen.indexOf(b.value)?(h=null===c?n(a,b.value,null):n(a,b.value,c-1),-1<h.indexOf("\n")&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special"));if(x(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e);g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?
(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function w(a,b,c){var d=0;return 60<a.reduce(function(a,b){d++;0<=b.indexOf("\n")&&d++;return a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0)?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function t(a){return Array.isArray(a)}function C(a){return"boolean"===typeof a}function A(a){return"number"===typeof a}
function y(a){return"string"===typeof a}function x(a){return void 0===a}function u(a){return B(a)&&"[object RegExp]"===Object.prototype.toString.call(a)}function B(a){return"object"===typeof a&&null!==a}function h(a){return B(a)&&"[object Date]"===Object.prototype.toString.call(a)}function r(a){return B(a)&&("[object Error]"===Object.prototype.toString.call(a)||a instanceof Error)}function z(a){return"function"===typeof a}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function F(){var a=
new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}var I=/%[sdj%]/g;k.format=function(a){if(!y(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(d(arguments[c]));return b.join(" ")}for(var c=1,e=arguments,f=e.length,b=String(a).replace(I,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case "%s":return String(e[c++]);case "%d":return Number(e[c++]);case "%j":try{return JSON.stringify(e[c++])}catch(K){return"[Circular]"}default:return a}}),
g=e[c];c<f;g=e[++c])b=null!==g&&B(g)?b+(" "+d(g)):b+(" "+g);return b};k.deprecate=function(b,d){if(x(c.process))return function(){return k.deprecate(b,d).apply(this,arguments)};if(!0===a.noDeprecation)return b;var e=!1;return function(){if(!e){if(a.throwDeprecation)throw Error(d);a.traceDeprecation?console.trace(d):console.error(d);e=!0}return b.apply(this,arguments)}};var E={},H;k.debuglog=function(b){x(H)&&(H=a.env.NODE_DEBUG||"");b=b.toUpperCase();if(!E[b])if((new RegExp("\\b"+b+"\\b","i")).test(H)){var c=
a.pid;E[b]=function(){var a=k.format.apply(k,arguments);console.error("%s %d: %s",b,c,a)}}else E[b]=function(){};return E[b]};k.inspect=d;d.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};d.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};k.isArray=t;k.isBoolean=C;k.isNull=
function(a){return null===a};k.isNullOrUndefined=function(a){return null==a};k.isNumber=A;k.isString=y;k.isSymbol=function(a){return"symbol"===typeof a};k.isUndefined=x;k.isRegExp=u;k.isObject=B;k.isDate=h;k.isError=r;k.isFunction=z;k.isPrimitive=function(a){return null===a||"boolean"===typeof a||"number"===typeof a||"string"===typeof a||"symbol"===typeof a||"undefined"===typeof a};k.isBuffer=g("./support/isBuffer");var J="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");k.log=function(){console.log("%s - %s",
F(),k.format.apply(k,arguments))};k.inherits=g("inherits");k._extend=function(a,b){if(!b||!B(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,g("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":42,_process:35,inherits:41}],44:[function(g,n,k){function a(a,b,e){return b?new c(a,b):new c(a)}g=function(){return this}();var c=g.WebSocket||g.MozWebSocket;n.exports=c?a:null;
c&&(a.prototype=c.prototype)},{}],45:[function(g,n,k){k.XMLHttpRequest=XMLHttpRequest},{}]},{},[1]);
